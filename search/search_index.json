{"config":{"lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"OSH-2021 \u00b6 \u8bfe\u7a0b\u4fe1\u606f \u00b6 \u6559\u5ba4\uff1a3A407 \u4e0a\u8bfe\u65f6\u95f4\uff1a\u661f\u671f\u4e00\u7684 15:55 ~ 17:30 \u53ca\u661f\u671f\u4e09\u7684 9:45 ~ 11:20 \u4e3b\u8bb2\u6559\u5e08\uff1a \u90a2\u51ef \u52a9\u6559\uff1a \u660e\u5b87\u9f99 \u3001 \u8881\u4e00\u73ae \u3001 \u7f57\u4e3d\u8587 \u4f5c\u4e1a \u00b6 No Date Task Due #0 - \u5927\u4f5c\u4e1a - #1 Apr 3 Lab 1 23:59, Sunday, Apr 25 #2 - \u5927\u4f5c\u4e1a-\u8c03\u7814\u62a5\u544a 23:59, Sunday, Apr 11 #3 - \u5927\u4f5c\u4e1a-\u53ef\u884c\u6027\u62a5\u544a 23:59, Sunday, Apr 18","title":"\u9996\u9875"},{"location":"#osh-2021","text":"","title":"OSH-2021"},{"location":"#_1","text":"\u6559\u5ba4\uff1a3A407 \u4e0a\u8bfe\u65f6\u95f4\uff1a\u661f\u671f\u4e00\u7684 15:55 ~ 17:30 \u53ca\u661f\u671f\u4e09\u7684 9:45 ~ 11:20 \u4e3b\u8bb2\u6559\u5e08\uff1a \u90a2\u51ef \u52a9\u6559\uff1a \u660e\u5b87\u9f99 \u3001 \u8881\u4e00\u73ae \u3001 \u7f57\u4e3d\u8587","title":"\u8bfe\u7a0b\u4fe1\u606f"},{"location":"#_2","text":"No Date Task Due #0 - \u5927\u4f5c\u4e1a - #1 Apr 3 Lab 1 23:59, Sunday, Apr 25 #2 - \u5927\u4f5c\u4e1a-\u8c03\u7814\u62a5\u544a 23:59, Sunday, Apr 11 #3 - \u5927\u4f5c\u4e1a-\u53ef\u884c\u6027\u62a5\u544a 23:59, Sunday, Apr 18","title":"\u4f5c\u4e1a"},{"location":"fool/","text":"Lab 4.1 (Empty) \u00b6","title":"Lab 4.1 (Empty)"},{"location":"fool/#lab-41-empty","text":"","title":"Lab 4.1 (Empty)"},{"location":"fool/empty/","text":"\u90fd\u8bf4\u4e86\u771f\u7684\u5565\u4e5f\u6ca1\u6709\u4e86:( \u00b6","title":"\u90fd\u8bf4\u4e86\u771f\u7684\u5565\u4e5f\u6ca1\u6709\u4e86:("},{"location":"fool/empty/#_1","text":"","title":"\u90fd\u8bf4\u4e86\u771f\u7684\u5565\u4e5f\u6ca1\u6709\u4e86:("},{"location":"lab-0/","text":"Lab 0 \u00b6 \u4e3a\u4e86\u8ba9\u540c\u5b66\u4eec\u80fd\u591f\u66f4\u597d\u5730\u5b66\u4e60 2021 \u6625\u5b63\u5b66\u671f\u7684 OSH \u8bfe\u7a0b\uff0c\u6211\u4eec\u51c6\u5907\u4e86\u4e00\u4e9b\u9884\u5907\u5185\u5bb9\u4f5c\u4e3a Lab 0\uff0c\u540c\u5b66\u4eec\u53ef\u4ee5\u81ea\u884c\u5b66\u4e60\u3002 Lab 0 \u8fd9\u5e76\u975e\u6b63\u5f0f\u5b9e\u9a8c\uff0c\u4e0d\u4f1a\u8ba1\u5165\u5b9e\u9a8c\u5206\uff0c\u4f46\u8bf7\u5927\u5bb6\u4e86\u89e3\u3001\u5b66\u4e60\u4ee5\u4e0b\u5185\u5bb9\u3002 Linux \u73af\u5883 \u00b6 \u5982\u679c\u4f60\u7684\u4e3b\u529b\u7cfb\u7edf\u662f Linux\uff0c \u6b22\u8fce\u4f60\u52a0\u5165 LUG \u4f60\u53ef\u4ee5\u8df3\u8fc7\u8fd9\u4e2a\u90e8\u5206\u3002 \u5982\u679c\u4f60\u5185\u5b58\u5145\u8db3\u3001\u6216\u8005\u4e0d\u592a\u60f3\u5728\u7269\u7406\u673a\u4e0a\u5b89\u88c5 Linux\uff0c\u53ef\u4ee5\u5c1d\u8bd5\u4f7f\u7528\u865a\u62df\u673a\u8fd0\u884c Linux\u3002\u5177\u4f53\u53ef\u4ee5\u53c2\u7167 \u5728 Windows \u4e2d\u4f7f\u7528\u865a\u62df\u673a\uff08By iBug\uff09 \u3001 \u5728 macOS \u4e2d\u4f7f\u7528\u865a\u62df\u673a\uff08By Taoky\uff09 \u8fd9\u4e24\u7bc7\u6587\u7ae0\u3002 \u5982\u679c\u4f60\u60f3\u5c1d\u8bd5\u628a\u672c\u5730\u7cfb\u7edf\u6362\u6210 Linux\u3001\u6216\u8005\u53cc\u7cfb\u7edf\uff0c\u53ef\u4ee5\u53c2\u8003 \u5404\u4e2a Linux \u53d1\u884c\u7248\u7684\u4ecb\u7ecd \uff0c\u9009\u62e9\u5408\u9002\u7684\u53d1\u884c\u7248\u8fdb\u884c\u5b89\u88c5\u3002\u8fd9\u91cc\u63a8\u8350\u6839\u636e Arch \u5b89\u88c5\u6559\u7a0b \u5b89\u88c5\u4e00\u6b21 Arch Linux\uff0c\u8fd9\u6837\u4f60\u5c31\u53ef\u4ee5\u8be6\u7ec6\u5730\u4e86\u89e3 Linux \u5404\u90e8\u5206\u7684\u7ec4\u6210\u3002 Linux \u6700\u57fa\u672c\u7684\u4f7f\u7528\u4e5f\u53ef\u4ee5\u4ece LUG Linux 101 \u5f00\u59cb\u5b66\u4e60\u3002 \u5982\u679c\u60f3\u4e86\u89e3\u66f4\u591a\u6709\u5173 Linux \u7684\u6280\u5de7\uff0c\u53ef\u4ee5\u770b Debian \u6559\u7a0b \u6216\u8005 Arch Linux \u6587\u7ae0\u7d22\u5f15 \u3002 \u9884\u671f\u7ed3\u679c\uff1a\u6709\u4e00\u4e2a\u53ef\u7528\u7684 Linux \u5de5\u4f5c\u73af\u5883\uff08\u4e0d\u9650\u4e8e\u672c\u5730\uff09\uff0c\u548c\u57fa\u672c\u7684 Linux \u4f7f\u7528\u80fd\u529b\u3002 \u4f53\u9a8c Rust \u00b6 \u53c2\u8003 Rust \u5b89\u88c5\u9875\u9762 \uff0c\u4f7f\u7528 Rustup \u5728\u672c\u5730\u5feb\u901f\u5b89\u88c5 Rust \u5de5\u5177\u94fe\u3002 \u8fd8\u6ca1\u63a5\u89e6\u8fc7 Rust \u7684\u540c\u5b66\u53ef\u4ee5\u770b\u770b Rust by Example \uff0c\u8fd9\u662f\u4e00\u4e2a\u5173\u4e8e Rust \u7684\u6559\u7a0b\u3002 \u4e4b\u540e\u6211\u4eec\u4f1a\u653e\u5f03\u4f7f\u7528 Rust \u6807\u51c6\u5e93\u3001\u5373\u52a0\u5165 #![no_std] \u5b8f\uff0c\u56e0\u4e3a\u6211\u4eec\u8981\u5728\u6811\u8393\u6d3e\u4e0a\u6784\u9020\u4e00\u4e2a\u5b8c\u5168\u4e0d\u4f9d\u8d56 Rust \u6807\u51c6\u5e93\u7684\u88f8\u91d1\u5c5e\uff08Bare Metal\uff09\u7cfb\u7edf\u3002\u53ef\u4ee5\u770b\u770b Writing an OS in Rust \u548c Rust Raspi OS \u3002 \u9884\u671f\u7ed3\u679c\uff1a\u80fd\u7406\u89e3 Rust \u7684\u57fa\u672c\u8bed\u6cd5\uff0c\u7f16\u5199 Rust \u88f8\u91d1\u5c5e\u7a0b\u5e8f\u3002 \u4f7f\u7528 Git \u00b6 \u8fd8\u6ca1\u63a5\u89e6\u8fc7 Git \u7684\u540c\u5b66\u53ef\u4ee5\u770b\u770b Git \u5165\u95e8\u6559\u7a0b \uff0c\u5b83\u5305\u542b\u57fa\u7840\u7684\u64cd\u4f5c\u4ee5\u53ca\u8fde\u63a5 GitHub/GitLab \u8fdc\u7a0b\u4ed3\u5e93\uff0c\u548c Github \u7684 Git Cheat Sheet \u3002 \u5982\u679c\u4f60\u5bf9 Git \u6709\u4e00\u5b9a\u4e86\u89e3\uff0c\u4f46\u662f\u9047\u5230\u9ebb\u70e6\u3001\u4e0d\u77e5\u5982\u4f55\u64cd\u4f5c\u7684\u65f6\u5019\u53ef\u4ee5\u770b \u8fd9\u4e2a \uff0c\u5b83\u5199\u4e86\u5728\u4e00\u4e9b\u4ee4\u4eba\u4e0d\u77e5\u6240\u63aa\u7684\u60c5\u666f\u4e0b\u5e94\u5f53\u6267\u884c\u7684 Git \u547d\u4ee4\uff0c\u8fd9\u4e9b\u60c5\u51b5\u6bd4\u8f83\u96be\u76f4\u63a5\u5728 Git \u7684\u5b98\u65b9 docs \u91cc\u67e5\u5230\u3002 Git \u5b98\u65b9\u6587\u6863 Pro Git book \u4e0d\u592a\u63a8\u8350\u4f5c\u4e3a\u5165\u95e8\u6559\u7a0b\uff0c\u4f46\u662f\u611f\u5174\u8da3\u53ef\u4ee5\u53bb\u770b\u770b\u3002 \u9884\u671f\u7ed3\u679c\uff1a\u80fd\u7528 Git \u5bf9\u81ea\u5df1\u5199\u7684\u4ee3\u7801\u8fdb\u884c\u7b80\u5355\u7248\u672c\u63a7\u5236\uff0c\u4f7f\u7528 Commit \u6b63\u786e\u7684\u6587\u4ef6\u5e76\u7559\u4e0b\u6070\u5f53\u7684 Commit message\uff0c\u80fd\u5728 GitHub \u4e0a\u8fdb\u884c\u591a\u4eba\u5408\u4f5c\u3002 \u8981\u6c42\uff1a\u540c\u5b66\u5728 GitHub \u4e0a\u521b\u5efa\u4e2a\u4eba\u79c1\u6709\u4ed3\u5e93\uff0c\u5e76\u9080\u8bf7 OSH-2021-TA \u52a0\u4e3a\u534f\u4f5c\u8005\u3002 \u73a9\u4e00\u73a9 Raspberry Pi \u00b6 \u6811\u8393\u6d3e\u62ff\u4e86\u5e72\u561b\uff1f\u80fd\u5403\uff1f \u80fd\u5403\u7070\uff1f \u5982\u679c\u4f60\u7684\u6811\u9709\u6d3e\u6b63\u5728\u8eba\u7740\u5403\u7070\uff0c\u53ef\u4ee5\u53c2\u8003 \u4e00\u540d\u52a9\u6559\u7684\u535a\u5ba2 \uff0c\u70e7\u4e2a\u7cfb\u7edf\u8fdb\u53bb\u5e76\u63a2\u7d22\u4e00\u756a\u3002 \u9884\u671f\u7ed3\u679c\uff1a\u4e86\u89e3\u6811\u8393\u6d3e\u7cfb\u7edf\u70e7\u5f55\u3001\u4f7f\u7528\u7684\u8fc7\u7a0b\uff0c\u89c2\u5bdf\u6811\u8393\u6d3e\u542f\u52a8\u7684\u8fc7\u7a0b\u53ca\u5176\u548c\u4e3b\u6d41\u8ba1\u7b97\u673a\u5f15\u5bfc\u5165\u7cfb\u7edf\u7684\u533a\u522b\u3002Have fun :D \u8ba4\u8bc6 Makefile \u00b6 \u8fd9\u91cc\u6709\u4e00\u7bc7 OSH2020 \u52a9\u6559 iBug \u7684\u535a\u5ba2 \u521d\u6b65\u4ecb\u7ecd\u4e86 Makefile \uff0c\u4f60\u8fd8\u53ef\u4ee5\u9605\u8bfb\u641c\u7d22 \"Makefile cheatsheet\" \u7684\u7ed3\u679c\u4ee5\u5feb\u901f\u4e86\u89e3\u66f4\u591a\uff0c\u6bd4\u5982 \u8fd9\u4e2a Cheat Sheet \u3002 \u9884\u671f\u7ed3\u679c\uff1a\u80fd\u7406\u89e3\u522b\u4eba\u5199\u7684 Makefile\uff0c\u80fd\u6539\u5199 Makefile\u3002","title":"\u4ecb\u7ecd"},{"location":"lab-0/#lab-0","text":"\u4e3a\u4e86\u8ba9\u540c\u5b66\u4eec\u80fd\u591f\u66f4\u597d\u5730\u5b66\u4e60 2021 \u6625\u5b63\u5b66\u671f\u7684 OSH \u8bfe\u7a0b\uff0c\u6211\u4eec\u51c6\u5907\u4e86\u4e00\u4e9b\u9884\u5907\u5185\u5bb9\u4f5c\u4e3a Lab 0\uff0c\u540c\u5b66\u4eec\u53ef\u4ee5\u81ea\u884c\u5b66\u4e60\u3002 Lab 0 \u8fd9\u5e76\u975e\u6b63\u5f0f\u5b9e\u9a8c\uff0c\u4e0d\u4f1a\u8ba1\u5165\u5b9e\u9a8c\u5206\uff0c\u4f46\u8bf7\u5927\u5bb6\u4e86\u89e3\u3001\u5b66\u4e60\u4ee5\u4e0b\u5185\u5bb9\u3002","title":"Lab 0"},{"location":"lab-0/#linux","text":"\u5982\u679c\u4f60\u7684\u4e3b\u529b\u7cfb\u7edf\u662f Linux\uff0c \u6b22\u8fce\u4f60\u52a0\u5165 LUG \u4f60\u53ef\u4ee5\u8df3\u8fc7\u8fd9\u4e2a\u90e8\u5206\u3002 \u5982\u679c\u4f60\u5185\u5b58\u5145\u8db3\u3001\u6216\u8005\u4e0d\u592a\u60f3\u5728\u7269\u7406\u673a\u4e0a\u5b89\u88c5 Linux\uff0c\u53ef\u4ee5\u5c1d\u8bd5\u4f7f\u7528\u865a\u62df\u673a\u8fd0\u884c Linux\u3002\u5177\u4f53\u53ef\u4ee5\u53c2\u7167 \u5728 Windows \u4e2d\u4f7f\u7528\u865a\u62df\u673a\uff08By iBug\uff09 \u3001 \u5728 macOS \u4e2d\u4f7f\u7528\u865a\u62df\u673a\uff08By Taoky\uff09 \u8fd9\u4e24\u7bc7\u6587\u7ae0\u3002 \u5982\u679c\u4f60\u60f3\u5c1d\u8bd5\u628a\u672c\u5730\u7cfb\u7edf\u6362\u6210 Linux\u3001\u6216\u8005\u53cc\u7cfb\u7edf\uff0c\u53ef\u4ee5\u53c2\u8003 \u5404\u4e2a Linux \u53d1\u884c\u7248\u7684\u4ecb\u7ecd \uff0c\u9009\u62e9\u5408\u9002\u7684\u53d1\u884c\u7248\u8fdb\u884c\u5b89\u88c5\u3002\u8fd9\u91cc\u63a8\u8350\u6839\u636e Arch \u5b89\u88c5\u6559\u7a0b \u5b89\u88c5\u4e00\u6b21 Arch Linux\uff0c\u8fd9\u6837\u4f60\u5c31\u53ef\u4ee5\u8be6\u7ec6\u5730\u4e86\u89e3 Linux \u5404\u90e8\u5206\u7684\u7ec4\u6210\u3002 Linux \u6700\u57fa\u672c\u7684\u4f7f\u7528\u4e5f\u53ef\u4ee5\u4ece LUG Linux 101 \u5f00\u59cb\u5b66\u4e60\u3002 \u5982\u679c\u60f3\u4e86\u89e3\u66f4\u591a\u6709\u5173 Linux \u7684\u6280\u5de7\uff0c\u53ef\u4ee5\u770b Debian \u6559\u7a0b \u6216\u8005 Arch Linux \u6587\u7ae0\u7d22\u5f15 \u3002 \u9884\u671f\u7ed3\u679c\uff1a\u6709\u4e00\u4e2a\u53ef\u7528\u7684 Linux \u5de5\u4f5c\u73af\u5883\uff08\u4e0d\u9650\u4e8e\u672c\u5730\uff09\uff0c\u548c\u57fa\u672c\u7684 Linux \u4f7f\u7528\u80fd\u529b\u3002","title":"Linux \u73af\u5883"},{"location":"lab-0/#rust","text":"\u53c2\u8003 Rust \u5b89\u88c5\u9875\u9762 \uff0c\u4f7f\u7528 Rustup \u5728\u672c\u5730\u5feb\u901f\u5b89\u88c5 Rust \u5de5\u5177\u94fe\u3002 \u8fd8\u6ca1\u63a5\u89e6\u8fc7 Rust \u7684\u540c\u5b66\u53ef\u4ee5\u770b\u770b Rust by Example \uff0c\u8fd9\u662f\u4e00\u4e2a\u5173\u4e8e Rust \u7684\u6559\u7a0b\u3002 \u4e4b\u540e\u6211\u4eec\u4f1a\u653e\u5f03\u4f7f\u7528 Rust \u6807\u51c6\u5e93\u3001\u5373\u52a0\u5165 #![no_std] \u5b8f\uff0c\u56e0\u4e3a\u6211\u4eec\u8981\u5728\u6811\u8393\u6d3e\u4e0a\u6784\u9020\u4e00\u4e2a\u5b8c\u5168\u4e0d\u4f9d\u8d56 Rust \u6807\u51c6\u5e93\u7684\u88f8\u91d1\u5c5e\uff08Bare Metal\uff09\u7cfb\u7edf\u3002\u53ef\u4ee5\u770b\u770b Writing an OS in Rust \u548c Rust Raspi OS \u3002 \u9884\u671f\u7ed3\u679c\uff1a\u80fd\u7406\u89e3 Rust \u7684\u57fa\u672c\u8bed\u6cd5\uff0c\u7f16\u5199 Rust \u88f8\u91d1\u5c5e\u7a0b\u5e8f\u3002","title":"\u4f53\u9a8c Rust"},{"location":"lab-0/#git","text":"\u8fd8\u6ca1\u63a5\u89e6\u8fc7 Git \u7684\u540c\u5b66\u53ef\u4ee5\u770b\u770b Git \u5165\u95e8\u6559\u7a0b \uff0c\u5b83\u5305\u542b\u57fa\u7840\u7684\u64cd\u4f5c\u4ee5\u53ca\u8fde\u63a5 GitHub/GitLab \u8fdc\u7a0b\u4ed3\u5e93\uff0c\u548c Github \u7684 Git Cheat Sheet \u3002 \u5982\u679c\u4f60\u5bf9 Git \u6709\u4e00\u5b9a\u4e86\u89e3\uff0c\u4f46\u662f\u9047\u5230\u9ebb\u70e6\u3001\u4e0d\u77e5\u5982\u4f55\u64cd\u4f5c\u7684\u65f6\u5019\u53ef\u4ee5\u770b \u8fd9\u4e2a \uff0c\u5b83\u5199\u4e86\u5728\u4e00\u4e9b\u4ee4\u4eba\u4e0d\u77e5\u6240\u63aa\u7684\u60c5\u666f\u4e0b\u5e94\u5f53\u6267\u884c\u7684 Git \u547d\u4ee4\uff0c\u8fd9\u4e9b\u60c5\u51b5\u6bd4\u8f83\u96be\u76f4\u63a5\u5728 Git \u7684\u5b98\u65b9 docs \u91cc\u67e5\u5230\u3002 Git \u5b98\u65b9\u6587\u6863 Pro Git book \u4e0d\u592a\u63a8\u8350\u4f5c\u4e3a\u5165\u95e8\u6559\u7a0b\uff0c\u4f46\u662f\u611f\u5174\u8da3\u53ef\u4ee5\u53bb\u770b\u770b\u3002 \u9884\u671f\u7ed3\u679c\uff1a\u80fd\u7528 Git \u5bf9\u81ea\u5df1\u5199\u7684\u4ee3\u7801\u8fdb\u884c\u7b80\u5355\u7248\u672c\u63a7\u5236\uff0c\u4f7f\u7528 Commit \u6b63\u786e\u7684\u6587\u4ef6\u5e76\u7559\u4e0b\u6070\u5f53\u7684 Commit message\uff0c\u80fd\u5728 GitHub \u4e0a\u8fdb\u884c\u591a\u4eba\u5408\u4f5c\u3002 \u8981\u6c42\uff1a\u540c\u5b66\u5728 GitHub \u4e0a\u521b\u5efa\u4e2a\u4eba\u79c1\u6709\u4ed3\u5e93\uff0c\u5e76\u9080\u8bf7 OSH-2021-TA \u52a0\u4e3a\u534f\u4f5c\u8005\u3002","title":"\u4f7f\u7528 Git"},{"location":"lab-0/#raspberry-pi","text":"\u6811\u8393\u6d3e\u62ff\u4e86\u5e72\u561b\uff1f\u80fd\u5403\uff1f \u80fd\u5403\u7070\uff1f \u5982\u679c\u4f60\u7684\u6811\u9709\u6d3e\u6b63\u5728\u8eba\u7740\u5403\u7070\uff0c\u53ef\u4ee5\u53c2\u8003 \u4e00\u540d\u52a9\u6559\u7684\u535a\u5ba2 \uff0c\u70e7\u4e2a\u7cfb\u7edf\u8fdb\u53bb\u5e76\u63a2\u7d22\u4e00\u756a\u3002 \u9884\u671f\u7ed3\u679c\uff1a\u4e86\u89e3\u6811\u8393\u6d3e\u7cfb\u7edf\u70e7\u5f55\u3001\u4f7f\u7528\u7684\u8fc7\u7a0b\uff0c\u89c2\u5bdf\u6811\u8393\u6d3e\u542f\u52a8\u7684\u8fc7\u7a0b\u53ca\u5176\u548c\u4e3b\u6d41\u8ba1\u7b97\u673a\u5f15\u5bfc\u5165\u7cfb\u7edf\u7684\u533a\u522b\u3002Have fun :D","title":"\u73a9\u4e00\u73a9 Raspberry Pi"},{"location":"lab-0/#makefile","text":"\u8fd9\u91cc\u6709\u4e00\u7bc7 OSH2020 \u52a9\u6559 iBug \u7684\u535a\u5ba2 \u521d\u6b65\u4ecb\u7ecd\u4e86 Makefile \uff0c\u4f60\u8fd8\u53ef\u4ee5\u9605\u8bfb\u641c\u7d22 \"Makefile cheatsheet\" \u7684\u7ed3\u679c\u4ee5\u5feb\u901f\u4e86\u89e3\u66f4\u591a\uff0c\u6bd4\u5982 \u8fd9\u4e2a Cheat Sheet \u3002 \u9884\u671f\u7ed3\u679c\uff1a\u80fd\u7406\u89e3\u522b\u4eba\u5199\u7684 Makefile\uff0c\u80fd\u6539\u5199 Makefile\u3002","title":"\u8ba4\u8bc6 Makefile"},{"location":"lab-1/","text":"Lab 1 \u00b6 \u5b9e\u9a8c\u5185\u5bb9 \u00b6 \u4e86\u89e3\u6811\u8393\u6d3e\u7684\u542f\u52a8\u539f\u7406\u548c\u8fc7\u7a0b \u7f16\u8bd1\u9002\u7528\u4e8e\u6811\u8393\u6d3e\u7684\u5185\u6838 \u6784\u5efa\u521d\u59cb\u5185\u5b58\u76d8 \u88c1\u526a\u5185\u6838\u5e76\u5728 QEMU \u6216\u6811\u8393\u6d3e\u4e2d\u6d4b\u8bd5 \u4e86\u89e3 BIOS Boot \u7684\u57fa\u672c\u6d41\u7a0b\u548c\u5b9e\u73b0\u65b9\u6848 \u5b9e\u9a8c\u8981\u6c42 \u00b6 \u63d0\u9192\uff1a\u7f16\u8bd1\u4e00\u6b21\u5185\u6838\u7684\u65f6\u95f4\u53ef\u80fd\u8f83\u4e45\uff0c\u5efa\u8bae\u5408\u7406\u5b89\u6392\u65f6\u95f4\uff0c\u4e0d\u8981\u5f53 ddl \u4eba\u3002 \u51c6\u5907\u5de5\u4f5c \u00b6 Linux \u73af\u5883\u548c\u57fa\u672c\u4f7f\u7528 \u4f7f\u7528 git \u7ba1\u7406\u81ea\u5df1\u7684\u5b9e\u9a8c\u76ee\u5f55 \u521b\u5efa GitHub \u79c1\u6709\u4ed3\u5e93\u5e76\u63d0\u4ea4 \u4e86\u89e3\u6811\u8393\u6d3e\u542f\u52a8\u7684\u57fa\u672c\u8fc7\u7a0b \u63a8\u8350\u5148\u9605\u8bfb lab0 \u5185\u5bb9\uff08Rust \u76f8\u5173\u53ef\u4ee5\u6682\u7f13\uff09\u3002 \u76ee\u5f55\u7ed3\u6784 \u00b6 . // Git \u6839\u76ee\u5f55 \u251c\u2500\u2500 lab1 // \u5b9e\u9a8c\u4e00\u6839\u76ee\u5f55 \u2502 \u251c\u2500\u2500 docs // \u5b9e\u9a8c\u4e00\u5b9e\u9a8c\u62a5\u544a\u6839\u76ee\u5f55 \u2502 \u2502 \u2514\u2500\u2500 *.md // \u6587\u4ef6\u540d\u81ea\u62df\uff0c\u53ef\u4ee5\u5199\u5728\u4e00\u4e2a\u6216\u591a\u4e2a Markdown \u6587\u4ef6\u4e2d \u2502 \u251c\u2500\u2500 linux \u2502 \u2502 \u251c\u2500\u2500 Image // \u5185\u6838\u6587\u4ef6 \u2502 \u2502 \u251c\u2500\u2500 initrd.cpio.gz// \u521d\u59cb\u5185\u5b58\u76d8\u538b\u7f29\u6587\u4ef6 \u2502 \u2502 \u251c\u2500\u2500 .config // \u5185\u6838\u7f16\u8bd1\u914d\u7f6e\u6587\u4ef6 | | \u2514\u2500\u2500 src | | \u2514\u2500\u2500 init.c // \u5982\u679c init \u662f binary\uff0c\u5728\u6b64\u5904\u63d0\u4ea4\u6e90\u7801 \u2502 \u2514\u2500\u2500 boot \u2502 \u2514\u2500\u2500 bootloader.img// \u53ef\u542f\u52a8\u7684 bootloader \u955c\u50cf \u251c\u2500\u2500 .gitignore // \u4f7f\u7528\u6b64\u6587\u4ef6\u5ffd\u7565\u4f60\u4e0d\u60f3\u63d0\u4ea4\u7684\u6587\u4ef6 \u2514\u2500\u2500 README.md // \u5199\u5165\u59d3\u540d\u5b66\u53f7 \u8bc4\u5206\u6807\u51c6 \u00b6 \u672c\u6b21\u5b9e\u9a8c\u5171 10 \u5206: Git & GitHub \u4ed3\u5e93: \u5728 GitHub \u4e0a\u521b\u5efa\u4e2a\u4eba\u79c1\u6709\u4ed3\u5e93 OSH-2021-Labs \uff0c\u5e76\u9080\u8bf7 OSH-2021-TA \u52a0\u4e3a\u534f\u4f5c\u8005\u3002 \u6b63\u786e\u4f7f\u7528 git\uff1a\u6ca1\u6709\u901a\u8fc7 GitHub \u7f51\u9875\u7248\u5927\u91cf\u4e0a\u4f20\u6587\u4ef6\uff1b\u5408\u7406\u8fdb\u884c\u7248\u672c\u7ba1\u7406\uff0c\u4e0d\u8981\u5728\u4e00\u4e24\u4e2a commit \u4e2d\u63d0\u4ea4\u6240\u6709\u6587\u4ef6\uff1bcommit message \u5177\u6709\u4e00\u5b9a\u53ef\u8bfb\u6027\uff1b\u7b26\u5408\u76ee\u5f55\u7ed3\u6784\u8981\u6c42.\uff080.5 \u5206\uff09 Linux \u5185\u6838: \u6b63\u786e\u7f16\u8bd1\u51fa\u9002\u7528\u4e8e\u6811\u8393\u6d3e\u7684\u5185\u6838\uff081 \u5206\uff09 \u5185\u6838\u88c1\u526a\u8fc7\uff0c\u5e76\u4e14\u5927\u5c0f\u4e0d\u8d85\u8fc7 10 MiB\uff0c\u5e76\u4e14\u5b83\u53ef\u4ee5\u5b8c\u6210\u4ee5\u4e0b\u300c\u521d\u59cb\u5185\u5b58\u76d8\u300d\u4e2d\u7684\u5168\u90e8\u4efb\u52a1\uff0c\u5982\u679c\u4f60\u6ca1\u6709\u5b8c\u6210\u300c\u521d\u59cb\u5185\u5b58\u76d8\u300d\u4e2d\u7684\u5168\u90e8\u4efb\u52a1\uff0c\u52a9\u6559\u4f1a\u4f7f\u7528\u81ea\u5df1\u7684 initrd.cpio.gz \u6587\u4ef6\u8fdb\u884c\u6d4b\u8bd5\uff09\uff081 \u5206\uff09 \u5728\u4e0a\u4e00\u6761\u7684\u57fa\u7840\u4e0a\uff0c\u88c1\u526a\u5f97\u5230\u7684\u5185\u6838\u5927\u5c0f\u4e0d\u8d85\u8fc7 6 MiB\uff080.5 \u5206\uff09 \u521d\u59cb\u5185\u5b58\u76d8: \u6b63\u786e\u6784\u5efa\u4e86 initrd.cpio.gz \u6587\u4ef6\u3002\uff080.5 \u5206\uff09 \u4f7f\u7528\u4f60\u7f16\u8bd1\u7684\u5185\u6838\u548c initrd.cpio.gz \uff0c\u5176\u4e2d\u7684 /init \u80fd\u591f\u6210\u529f\u4f9d\u6b21\u6267\u884c\u52a9\u6559\u63d0\u4f9b\u7684\u7a0b\u5e8f 1\uff080.5 \u5206\uff09 \u4f7f\u7528\u4f60\u7f16\u8bd1\u7684\u5185\u6838\u548c initrd.cpio.gz \uff0c\u5176\u4e2d\u7684 /init \u80fd\u591f\u6210\u529f\u4f9d\u6b21\u6267\u884c\u52a9\u6559\u63d0\u4f9b\u7684\u7a0b\u5e8f 1\u30012\u30013\uff0c\u7a0b\u5e8f 3 \u6267\u884c\u5b8c\u6210\u540e\u4e0d\u51fa\u73b0\u5185\u6838\u6050\u614c\uff08Kernel Panic\uff09\uff081 \u5206\uff09 \u521d\u8bc6 Boot: \u6b63\u786e\u6784\u5efa\u4e86\u80fd\u591f\u542f\u52a8\u7684 bootloader.img \u6587\u4ef6\uff081 \u5206\uff09 \u4ece\u7b2c\u4e00\u7ec4\u95ee\u9898\u4e2d\u9009\u62e9\u4e24\u4e2a\u8fdb\u884c\u56de\u7b54\uff081 \u5206\uff09 \u4ece\u7b2c\u4e8c\u7ec4\u95ee\u9898\u4e2d\u9009\u62e9\u4e00\u4e2a\u8fdb\u884c\u56de\u7b54\uff081 \u5206\uff09 \u601d\u8003\u9898: \u5728\u4e0b\u9762\u7ed9\u51fa\u7684\u601d\u8003\u9898\u4e2d\u4efb\u9009 4 \u9053\u5e76\u5b8c\u6210\u5b83\u4eec\uff082 \u5206\uff09 \u601d\u8003\u9898 \u00b6 \u8bf7\u7b80\u8981\u89e3\u91ca Linux \u4e0e Ubuntu \u3001 Debian \u3001 ArchLinux \u3001 Fedora \u7b49\u4e4b\u95f4\u7684\u5173\u7cfb\u548c\u533a\u522b\u3002 \u6811\u8393\u6d3e\u5b98\u65b9\u7f16\u8bd1\u5185\u6838\u7684\u6587\u6863 \u4e2d\u63d0\u5230 install the kernel modules onto the SD card \uff0c\u5b8c\u6210\u672c\u5b9e\u9a8c\u662f\u5426\u9700\u8981\u8fd9\u4e48\u505a\uff1f\u53ca\u4e3a\u4ec0\u4e48\uff1f\u5bf9\u5185\u6838\u88c1\u526a\u6709\u4ec0\u4e48\u6307\u5bfc\u610f\u4e49\uff1f\uff08hint\uff1a menuconfig \u4e2d\u6807 [M] \u7684\u9009\u9879\uff1b modules \u5728\u542f\u52a8\u8fc7\u7a0b\u4e2d\u7684\u4f5c\u7528\uff0c\u548c init \u7684\u5173\u7cfb\uff09 \u7b80\u8ff0\u6811\u8393\u6d3e\u542f\u52a8\u7684\u5404\u4e2a\u9636\u6bb5\u3002\uff08hint\uff1a bootcode.bin \u3001 start.elf \u3001 cmdline.txt \u7b49\u7684\u4f5c\u7528\uff09 \u5728\u6811\u8393\u6d3e\u542f\u52a8\u9636\u6bb5\u4f7f\u7528\u4e32\u53e3\u89c2\u5bdf\u8f93\u51fa\u9700\u8981\u54ea\u4e9b\u6761\u4ef6\uff1f\u4e3a\u4ec0\u4e48\u5b9e\u9a8c\u7528\u6811\u8393\u6d3e\u4e0a\u901a\u8fc7 GPIO \u4f7f\u7528\u7684\u4e32\u53e3\u662f miniUART\uff1f \u4e3a\u4ec0\u4e48\u5728 x86 \u73af\u5883\u4e0b\u88c5\u4e86 qemu-user \u4e4b\u540e\u53ef\u4ee5\u76f4\u63a5\u8fd0\u884c arm64 \u7684 busybox \uff0c\u5176\u4e2d\u7684\u5177\u4f53\u6267\u884c\u8fc7\u7a0b\u662f\u600e\u6837\u7684\uff1f qemu-user \u548c qemu-system \u7684\u4e3b\u8981\u533a\u522b\u662f\u4ec0\u4e48\uff1f \u67e5\u9605 PXE \u7684\u8d44\u6599\uff0c\u7528\u81ea\u5df1\u7684\u8bdd\u63cf\u8ff0\u5b83\u542f\u52a8\u7684\u8fc7\u7a0b\u3002 \u67e5\u9605 GRUB \u7684\u8d44\u6599\uff0c\u7528\u81ea\u5df1\u7684\u8bdd\u63cf\u8ff0\u5b83\u542f\u52a8\u7684\u8fc7\u7a0b\u3002 \u8bf4\u660e UEFI Boot \u7684\u6d41\u7a0b\uff0c\u622a\u56fe\u6307\u51fa\u4f60\u7684\u67d0\u4e00\u4e2a\u7cfb\u7edf\u7684 EFI \u5206\u533a\u4e2d\u5305\u542b\u54ea\u4e9b\u6587\u4ef6\u3002 \u4e3a\u4ec0\u4e48\u73b0\u5728\u624b\u673a\u3001\u6811\u8393\u6d3e\u7b49\u5bb6\u7528 arm \u8bbe\u5907\u4e0d\u50cf\u901a\u7528 PC \u4e00\u6837\u4f7f\u7528 UEFI \u542f\u52a8\uff1f\uff08 RPI4 UEFI \u662f\u4e00\u4e2a\u8bd5\u9a8c\u6027\u8d28\u7684\u6811\u8393\u6d3e UEFI \u56fa\u4ef6\uff09","title":"\u4ecb\u7ecd"},{"location":"lab-1/#lab-1","text":"","title":"Lab 1"},{"location":"lab-1/#_1","text":"\u4e86\u89e3\u6811\u8393\u6d3e\u7684\u542f\u52a8\u539f\u7406\u548c\u8fc7\u7a0b \u7f16\u8bd1\u9002\u7528\u4e8e\u6811\u8393\u6d3e\u7684\u5185\u6838 \u6784\u5efa\u521d\u59cb\u5185\u5b58\u76d8 \u88c1\u526a\u5185\u6838\u5e76\u5728 QEMU \u6216\u6811\u8393\u6d3e\u4e2d\u6d4b\u8bd5 \u4e86\u89e3 BIOS Boot \u7684\u57fa\u672c\u6d41\u7a0b\u548c\u5b9e\u73b0\u65b9\u6848","title":"\u5b9e\u9a8c\u5185\u5bb9"},{"location":"lab-1/#_2","text":"\u63d0\u9192\uff1a\u7f16\u8bd1\u4e00\u6b21\u5185\u6838\u7684\u65f6\u95f4\u53ef\u80fd\u8f83\u4e45\uff0c\u5efa\u8bae\u5408\u7406\u5b89\u6392\u65f6\u95f4\uff0c\u4e0d\u8981\u5f53 ddl \u4eba\u3002","title":"\u5b9e\u9a8c\u8981\u6c42"},{"location":"lab-1/#_3","text":"Linux \u73af\u5883\u548c\u57fa\u672c\u4f7f\u7528 \u4f7f\u7528 git \u7ba1\u7406\u81ea\u5df1\u7684\u5b9e\u9a8c\u76ee\u5f55 \u521b\u5efa GitHub \u79c1\u6709\u4ed3\u5e93\u5e76\u63d0\u4ea4 \u4e86\u89e3\u6811\u8393\u6d3e\u542f\u52a8\u7684\u57fa\u672c\u8fc7\u7a0b \u63a8\u8350\u5148\u9605\u8bfb lab0 \u5185\u5bb9\uff08Rust \u76f8\u5173\u53ef\u4ee5\u6682\u7f13\uff09\u3002","title":"\u51c6\u5907\u5de5\u4f5c"},{"location":"lab-1/#_4","text":". // Git \u6839\u76ee\u5f55 \u251c\u2500\u2500 lab1 // \u5b9e\u9a8c\u4e00\u6839\u76ee\u5f55 \u2502 \u251c\u2500\u2500 docs // \u5b9e\u9a8c\u4e00\u5b9e\u9a8c\u62a5\u544a\u6839\u76ee\u5f55 \u2502 \u2502 \u2514\u2500\u2500 *.md // \u6587\u4ef6\u540d\u81ea\u62df\uff0c\u53ef\u4ee5\u5199\u5728\u4e00\u4e2a\u6216\u591a\u4e2a Markdown \u6587\u4ef6\u4e2d \u2502 \u251c\u2500\u2500 linux \u2502 \u2502 \u251c\u2500\u2500 Image // \u5185\u6838\u6587\u4ef6 \u2502 \u2502 \u251c\u2500\u2500 initrd.cpio.gz// \u521d\u59cb\u5185\u5b58\u76d8\u538b\u7f29\u6587\u4ef6 \u2502 \u2502 \u251c\u2500\u2500 .config // \u5185\u6838\u7f16\u8bd1\u914d\u7f6e\u6587\u4ef6 | | \u2514\u2500\u2500 src | | \u2514\u2500\u2500 init.c // \u5982\u679c init \u662f binary\uff0c\u5728\u6b64\u5904\u63d0\u4ea4\u6e90\u7801 \u2502 \u2514\u2500\u2500 boot \u2502 \u2514\u2500\u2500 bootloader.img// \u53ef\u542f\u52a8\u7684 bootloader \u955c\u50cf \u251c\u2500\u2500 .gitignore // \u4f7f\u7528\u6b64\u6587\u4ef6\u5ffd\u7565\u4f60\u4e0d\u60f3\u63d0\u4ea4\u7684\u6587\u4ef6 \u2514\u2500\u2500 README.md // \u5199\u5165\u59d3\u540d\u5b66\u53f7","title":"\u76ee\u5f55\u7ed3\u6784"},{"location":"lab-1/#_5","text":"\u672c\u6b21\u5b9e\u9a8c\u5171 10 \u5206: Git & GitHub \u4ed3\u5e93: \u5728 GitHub \u4e0a\u521b\u5efa\u4e2a\u4eba\u79c1\u6709\u4ed3\u5e93 OSH-2021-Labs \uff0c\u5e76\u9080\u8bf7 OSH-2021-TA \u52a0\u4e3a\u534f\u4f5c\u8005\u3002 \u6b63\u786e\u4f7f\u7528 git\uff1a\u6ca1\u6709\u901a\u8fc7 GitHub \u7f51\u9875\u7248\u5927\u91cf\u4e0a\u4f20\u6587\u4ef6\uff1b\u5408\u7406\u8fdb\u884c\u7248\u672c\u7ba1\u7406\uff0c\u4e0d\u8981\u5728\u4e00\u4e24\u4e2a commit \u4e2d\u63d0\u4ea4\u6240\u6709\u6587\u4ef6\uff1bcommit message \u5177\u6709\u4e00\u5b9a\u53ef\u8bfb\u6027\uff1b\u7b26\u5408\u76ee\u5f55\u7ed3\u6784\u8981\u6c42.\uff080.5 \u5206\uff09 Linux \u5185\u6838: \u6b63\u786e\u7f16\u8bd1\u51fa\u9002\u7528\u4e8e\u6811\u8393\u6d3e\u7684\u5185\u6838\uff081 \u5206\uff09 \u5185\u6838\u88c1\u526a\u8fc7\uff0c\u5e76\u4e14\u5927\u5c0f\u4e0d\u8d85\u8fc7 10 MiB\uff0c\u5e76\u4e14\u5b83\u53ef\u4ee5\u5b8c\u6210\u4ee5\u4e0b\u300c\u521d\u59cb\u5185\u5b58\u76d8\u300d\u4e2d\u7684\u5168\u90e8\u4efb\u52a1\uff0c\u5982\u679c\u4f60\u6ca1\u6709\u5b8c\u6210\u300c\u521d\u59cb\u5185\u5b58\u76d8\u300d\u4e2d\u7684\u5168\u90e8\u4efb\u52a1\uff0c\u52a9\u6559\u4f1a\u4f7f\u7528\u81ea\u5df1\u7684 initrd.cpio.gz \u6587\u4ef6\u8fdb\u884c\u6d4b\u8bd5\uff09\uff081 \u5206\uff09 \u5728\u4e0a\u4e00\u6761\u7684\u57fa\u7840\u4e0a\uff0c\u88c1\u526a\u5f97\u5230\u7684\u5185\u6838\u5927\u5c0f\u4e0d\u8d85\u8fc7 6 MiB\uff080.5 \u5206\uff09 \u521d\u59cb\u5185\u5b58\u76d8: \u6b63\u786e\u6784\u5efa\u4e86 initrd.cpio.gz \u6587\u4ef6\u3002\uff080.5 \u5206\uff09 \u4f7f\u7528\u4f60\u7f16\u8bd1\u7684\u5185\u6838\u548c initrd.cpio.gz \uff0c\u5176\u4e2d\u7684 /init \u80fd\u591f\u6210\u529f\u4f9d\u6b21\u6267\u884c\u52a9\u6559\u63d0\u4f9b\u7684\u7a0b\u5e8f 1\uff080.5 \u5206\uff09 \u4f7f\u7528\u4f60\u7f16\u8bd1\u7684\u5185\u6838\u548c initrd.cpio.gz \uff0c\u5176\u4e2d\u7684 /init \u80fd\u591f\u6210\u529f\u4f9d\u6b21\u6267\u884c\u52a9\u6559\u63d0\u4f9b\u7684\u7a0b\u5e8f 1\u30012\u30013\uff0c\u7a0b\u5e8f 3 \u6267\u884c\u5b8c\u6210\u540e\u4e0d\u51fa\u73b0\u5185\u6838\u6050\u614c\uff08Kernel Panic\uff09\uff081 \u5206\uff09 \u521d\u8bc6 Boot: \u6b63\u786e\u6784\u5efa\u4e86\u80fd\u591f\u542f\u52a8\u7684 bootloader.img \u6587\u4ef6\uff081 \u5206\uff09 \u4ece\u7b2c\u4e00\u7ec4\u95ee\u9898\u4e2d\u9009\u62e9\u4e24\u4e2a\u8fdb\u884c\u56de\u7b54\uff081 \u5206\uff09 \u4ece\u7b2c\u4e8c\u7ec4\u95ee\u9898\u4e2d\u9009\u62e9\u4e00\u4e2a\u8fdb\u884c\u56de\u7b54\uff081 \u5206\uff09 \u601d\u8003\u9898: \u5728\u4e0b\u9762\u7ed9\u51fa\u7684\u601d\u8003\u9898\u4e2d\u4efb\u9009 4 \u9053\u5e76\u5b8c\u6210\u5b83\u4eec\uff082 \u5206\uff09","title":"\u8bc4\u5206\u6807\u51c6"},{"location":"lab-1/#_6","text":"\u8bf7\u7b80\u8981\u89e3\u91ca Linux \u4e0e Ubuntu \u3001 Debian \u3001 ArchLinux \u3001 Fedora \u7b49\u4e4b\u95f4\u7684\u5173\u7cfb\u548c\u533a\u522b\u3002 \u6811\u8393\u6d3e\u5b98\u65b9\u7f16\u8bd1\u5185\u6838\u7684\u6587\u6863 \u4e2d\u63d0\u5230 install the kernel modules onto the SD card \uff0c\u5b8c\u6210\u672c\u5b9e\u9a8c\u662f\u5426\u9700\u8981\u8fd9\u4e48\u505a\uff1f\u53ca\u4e3a\u4ec0\u4e48\uff1f\u5bf9\u5185\u6838\u88c1\u526a\u6709\u4ec0\u4e48\u6307\u5bfc\u610f\u4e49\uff1f\uff08hint\uff1a menuconfig \u4e2d\u6807 [M] \u7684\u9009\u9879\uff1b modules \u5728\u542f\u52a8\u8fc7\u7a0b\u4e2d\u7684\u4f5c\u7528\uff0c\u548c init \u7684\u5173\u7cfb\uff09 \u7b80\u8ff0\u6811\u8393\u6d3e\u542f\u52a8\u7684\u5404\u4e2a\u9636\u6bb5\u3002\uff08hint\uff1a bootcode.bin \u3001 start.elf \u3001 cmdline.txt \u7b49\u7684\u4f5c\u7528\uff09 \u5728\u6811\u8393\u6d3e\u542f\u52a8\u9636\u6bb5\u4f7f\u7528\u4e32\u53e3\u89c2\u5bdf\u8f93\u51fa\u9700\u8981\u54ea\u4e9b\u6761\u4ef6\uff1f\u4e3a\u4ec0\u4e48\u5b9e\u9a8c\u7528\u6811\u8393\u6d3e\u4e0a\u901a\u8fc7 GPIO \u4f7f\u7528\u7684\u4e32\u53e3\u662f miniUART\uff1f \u4e3a\u4ec0\u4e48\u5728 x86 \u73af\u5883\u4e0b\u88c5\u4e86 qemu-user \u4e4b\u540e\u53ef\u4ee5\u76f4\u63a5\u8fd0\u884c arm64 \u7684 busybox \uff0c\u5176\u4e2d\u7684\u5177\u4f53\u6267\u884c\u8fc7\u7a0b\u662f\u600e\u6837\u7684\uff1f qemu-user \u548c qemu-system \u7684\u4e3b\u8981\u533a\u522b\u662f\u4ec0\u4e48\uff1f \u67e5\u9605 PXE \u7684\u8d44\u6599\uff0c\u7528\u81ea\u5df1\u7684\u8bdd\u63cf\u8ff0\u5b83\u542f\u52a8\u7684\u8fc7\u7a0b\u3002 \u67e5\u9605 GRUB \u7684\u8d44\u6599\uff0c\u7528\u81ea\u5df1\u7684\u8bdd\u63cf\u8ff0\u5b83\u542f\u52a8\u7684\u8fc7\u7a0b\u3002 \u8bf4\u660e UEFI Boot \u7684\u6d41\u7a0b\uff0c\u622a\u56fe\u6307\u51fa\u4f60\u7684\u67d0\u4e00\u4e2a\u7cfb\u7edf\u7684 EFI \u5206\u533a\u4e2d\u5305\u542b\u54ea\u4e9b\u6587\u4ef6\u3002 \u4e3a\u4ec0\u4e48\u73b0\u5728\u624b\u673a\u3001\u6811\u8393\u6d3e\u7b49\u5bb6\u7528 arm \u8bbe\u5907\u4e0d\u50cf\u901a\u7528 PC \u4e00\u6837\u4f7f\u7528 UEFI \u542f\u52a8\uff1f\uff08 RPI4 UEFI \u662f\u4e00\u4e2a\u8bd5\u9a8c\u6027\u8d28\u7684\u6811\u8393\u6d3e UEFI \u56fa\u4ef6\uff09","title":"\u601d\u8003\u9898"},{"location":"lab-1/boot/","text":"\u521d\u8bc6 Boot \u00b6 \u5bf9\u4e8e\u4e00\u53f0\uff08\u6bd4\u8f83\u73b0\u4ee3\u7684\uff09\u8ba1\u7b97\u673a\uff0c\u4ece\u4e0a\u7535\u5230\u5141\u8bb8\u7528\u6237\u64cd\u4f5c\u786e\u5b9e\uff08\u5728\u5927\u591a\u6570\u65f6\u5019\uff09\u662f\u4e00\u4e2a\u6f2b\u957f\u7684\u8fc7\u7a0b\u3002 \u7136\u800c\u5982\u679c\u6211\u4eec\u613f\u610f\u9009\u7528\u4e00\u4e9b\u7b80\u5355\u7684\u65b9\u6848\uff0c\u8fd9\u4e2a\u8fc7\u7a0b\u5c06\u4e0d\u90a3\u4e48\u590d\u6742\u3002 \u8fd9\u91cc\u6211\u4eec\u5c31\u5c06\u4ee5 x86 \u67b6\u6784\u4e0a\u7684 BIOS Boot \u4e3a\u4f8b\uff0c\u63a2\u7d22 Boot \u7684\u8fc7\u7a0b\u3002 \u9996\u5148\u8bf7\u81ea\u884c\u67e5\u9605 x86 \u6c47\u7f16\u7684\u8d44\u6599\uff0c\u4e86\u89e3\u4e00\u4e9b\u57fa\u672c\u7684\u6c47\u7f16\u77e5\u8bc6\uff0c\u5305\u62ec\uff1a \u5bc4\u5b58\u5668\u548c\u6808\u662f\u4ec0\u4e48\uff1f\u5982\u4f55\u64cd\u4f5c\uff1f \u5982\u4f55\u4f7f\u7528 BIOS \u4e2d\u65ad\u8c03\u7528\uff08BIOS interrupt call\uff09\uff1f\u5982\u4f55\u57fa\u672c\u5730\u8c03\u7528\u51fd\u6570\uff1f\u5982\u4f55\u57fa\u672c\u5730\u4f7f\u7528\u5b8f\uff1f \u5982\u4f55\u58f0\u660e\u4e00\u4e2a\u50cf\u5e38\u91cf\u7684\u4e1c\u897f\uff1f\u5982\u4f55\u58f0\u660e\u4e00\u4e2a\u50cf\u53d8\u91cf\u7684\u4e1c\u897f\uff1f \u4e0d\u8981\u7ea0\u7ed3\u5728\u4e0a\u8ff0\u95ee\u9898\u4e0a\uff0c\u5927\u81f4\u660e\u767d\u5373\u53ef\u3002 \u63a5\u4e0b\u6765\u6211\u4eec\u5c06\u67e5\u770b\u4e00\u4efd\u4e0d\u5b8c\u5168\u3001\u4f46\u80fd\u5de5\u4f5c\u7684 bootloader \u7684\u4ee3\u7801\uff1a \u9996\u5148\u662f\u73af\u5883\u914d\u7f6e\u3002 \u8bf7\u786e\u4fdd\u4f60\u76ee\u524d\u4f7f\u7528\u7684\u662f \u5177\u6709\u56fe\u5f62\u754c\u9762\u7684 Ubuntu \u865a\u62df\u673a \uff08\u5982\u679c\u4f7f\u7528\u5176\u4ed6\u53d1\u884c\u7248\uff0c\u8bf7\u53c2\u7167\u4e0b\u65b9\u81ea\u884c\u5904\u7406\uff0c\u4e00\u822c\u4e0d\u4f1a\u51fa\u73b0\u5947\u602a\u7684\u95ee\u9898\uff09\uff0c\u8fd0\u884c\u4ee5\u4e0b\u6307\u4ee4\uff1a # \u5b89\u88c5\u5de5\u5177 sudo apt install nasm qemu make \u7136\u540e\u4ece\u6b64\u5904\u83b7\u5f97\u4ee3\u7801\uff1a bootloader-x86.tar.xz \u5e76\u89e3\u538b\u83b7\u5f97\u6e90\u7801\u3002 \u8fd9\u4efd\u4ee3\u7801\u7684\u5165\u53e3\u662f boot.asm \u6587\u4ef6\uff0c\u4e4b\u540e\u4f1a\u8fd0\u884c loader.asm \u6587\u4ef6\u3002 kernel.asm \u4e0d\u4f1a\u88ab\u8fd0\u884c\u3002 \u5176\u4f59\u4e24\u4e2a fat12.inc \u548c log.inc \u6587\u4ef6\u53ef\u4ee5\u7c7b\u6bd4\u505a C \u4e2d\u7684\u5934\u6587\u4ef6\u3001\u4f1a\u88ab\u5b8f\u5185\u8fde\u5230\u524d\u9762\u7684\u4e24\u4e2a\u6587\u4ef6\u4e2d\u3002 \u6b64\u4ee3\u7801\u5e26\u6709\u4e00\u4efd Makefile \uff0c\u8bb0\u8f7d\u4e86\u5982\u4f55\u5b8c\u6210\u7f16\u8bd1\u548c\u6d4b\u8bd5\u3002 \u8bf7\u9605\u8bfb Makefile \u5185\u5bb9\uff0c\u4f7f\u7528\u6b63\u786e\u7684\u6307\u4ee4\u5b8c\u6210\u7f16\u8bd1\u3002\uff081 \u5206\uff09 \u73b0\u5728\uff0c\u8bf7\u4ece\u4ee5\u4e0b\u51e0\u4e2a\u95ee\u9898\u4e2d\u9009\u62e9 2 \u4e2a\uff08\u5171 1 \u5206\uff09\uff0c\u67e5\u9605\u76f8\u5173\u8d44\u6599\u540e\u7b80\u8981\u56de\u7b54\uff1a xor ax, ax \u4f7f\u7528\u4e86\u5f02\u6216\u64cd\u4f5c xor \uff0c\u8fd9\u662f\u5728\u5e72\u4ec0\u4e48\uff1f\u8fd9\u4e48\u505a\u6709\u4ec0\u4e48\u597d\u5904\u5462\uff1f jmp $ \u53c8\u662f\u5728\u5e72\u4ec0\u4e48\uff1f [es:di] \u662f\u4e00\u4e2a\u5bfb\u5740\u64cd\u4f5c\uff0c\u8fd9\u662f\u5728\u5bfb\u5740\u5185\u5b58\u7684\u54ea\u4e2a\u5730\u5740\u5462\uff1f boot.asm \u6587\u4ef6\u524d\u4fa7\u7684 org 0x7c00 \u6709\u4ec0\u4e48\u7528\uff1f times 510 - ($ - $$) db 0 \u662f\u5728\u5e72\u4ec0\u4e48\uff1f\u4e3a\u4ec0\u4e48\u8981\u8fd9\u4e48\u505a\u5462\uff1f\u4e3a\u4ec0\u4e48\u8fd9\u91cc\u6709\u4e00\u4e2a 510 \uff1f \u518d\u5728\u4ece\u4ee5\u4e0b\u51e0\u4e2a\u95ee\u9898\u4e2d\u9009\u62e9 1 \u4e2a\uff081 \u5206\uff09\uff0c\u7b80\u5355\u4e86\u89e3\u4ee3\u7801\u6d41\u7a0b\u540e\u7b80\u8981\u56de\u7b54\uff1a \u5c1d\u8bd5\u4fee\u6539\u4ee3\u7801\uff0c\u5728\u76ee\u524d\u5df2\u6709\u7684\u8f93\u51fa\u4e2d\u589e\u52a0\u4e00\u884c\u8f93\u51fa\u201cI am OK!\u201d\uff0c\u6837\u5f0f\u4e0d\u9650\uff0c\u4f4d\u7f6e\u4e0d\u9650\uff0c\u4f46\u4e0d\u80fd\u8986\u76d6\u5176\u4ed6\u7684\u8f93\u51fa\uff1b \u901a\u8fc7 boot.asm \u6587\u4ef6\u53ca\u76f8\u5e94\u7684\u5176\u4ed6\u8d44\u6599\uff0c\u7b80\u5355\u63cf\u8ff0 BIOS Boot \u662f\u600e\u4e48\u786e\u5b9a\u4e00\u4e2a\u8f6f\u76d8\uff08floppy\uff09\u662f\u53ef\u542f\u52a8\uff08bootable\uff09\u7684\uff1f \u4e3a\u4ec0\u4e48 boot.asm \u6267\u884c\u4e4b\u540e\u53ef\u4ee5\u7ee7\u7eed\u6267\u884c loader.asm \uff1f \u4e3a\u4ec0\u4e48\u8981\u7528 boot.asm \u548c loader.asm \u4e24\u4e2a\u6587\u4ef6\uff1f\u628a\u4ee3\u7801\u5199\u5728\u4e00\u4e2a\u6587\u4ef6\u91cc\u4e0d\u597d\u5417\uff1f \u518d\u63a5\u4e0b\u6765\u51e0\u4e2a\u95ee\u9898\u4e0d\u4f1a\u7ed9\u5206\uff0c\u4f46\u5982\u679c\u4f60\u505a\u51fa\u6765\u4e86\u52a9\u6559\u4f1a\u4e3a\u4f60\u9f13\u638c\uff1a \u8fd9\u4e9b\u4ee3\u7801\u662f\u4e0d\u5b8c\u5168\u7684\uff0c\u5c1d\u8bd5\u8865\u5168\u8fd9\u4e9b\u4ee3\u7801\uff0c\u4f7f\u5f97 kernel.asm \u53ef\u4ee5\u88ab\u8fd0\u884c\uff1b \u540c\u6837\u662f\u5c1d\u8bd5\u8865\u5168\u8fd9\u4e9b\u4ee3\u7801\uff0c\u4f7f\u5f97\u7cfb\u7edf\u8fdb\u5165\u957f\u6a21\u5f0f\uff08long mode\uff09\uff1b \u53c8\u540c\u6837\u662f\u5c1d\u8bd5\u8865\u5168\u8fd9\u4e9b\u4ee3\u7801\uff0c\u4f7f\u5f97\u7cfb\u7edf\u7684\u8fd0\u884c\u53ef\u4ee5\u8df3\u8f6c\u5230\u4f60\u81ea\u884c\u589e\u6dfb\u7684 C/C++/Rust \u4ee3\u7801\u4e0a\uff1b \u6216\u8005\u81ea\u884c\u5b9e\u73b0\u53e6\u4e00\u5957\u7684 UEFI Boot\uff1b","title":"\u521d\u8bc6 Boot"},{"location":"lab-1/boot/#boot","text":"\u5bf9\u4e8e\u4e00\u53f0\uff08\u6bd4\u8f83\u73b0\u4ee3\u7684\uff09\u8ba1\u7b97\u673a\uff0c\u4ece\u4e0a\u7535\u5230\u5141\u8bb8\u7528\u6237\u64cd\u4f5c\u786e\u5b9e\uff08\u5728\u5927\u591a\u6570\u65f6\u5019\uff09\u662f\u4e00\u4e2a\u6f2b\u957f\u7684\u8fc7\u7a0b\u3002 \u7136\u800c\u5982\u679c\u6211\u4eec\u613f\u610f\u9009\u7528\u4e00\u4e9b\u7b80\u5355\u7684\u65b9\u6848\uff0c\u8fd9\u4e2a\u8fc7\u7a0b\u5c06\u4e0d\u90a3\u4e48\u590d\u6742\u3002 \u8fd9\u91cc\u6211\u4eec\u5c31\u5c06\u4ee5 x86 \u67b6\u6784\u4e0a\u7684 BIOS Boot \u4e3a\u4f8b\uff0c\u63a2\u7d22 Boot \u7684\u8fc7\u7a0b\u3002 \u9996\u5148\u8bf7\u81ea\u884c\u67e5\u9605 x86 \u6c47\u7f16\u7684\u8d44\u6599\uff0c\u4e86\u89e3\u4e00\u4e9b\u57fa\u672c\u7684\u6c47\u7f16\u77e5\u8bc6\uff0c\u5305\u62ec\uff1a \u5bc4\u5b58\u5668\u548c\u6808\u662f\u4ec0\u4e48\uff1f\u5982\u4f55\u64cd\u4f5c\uff1f \u5982\u4f55\u4f7f\u7528 BIOS \u4e2d\u65ad\u8c03\u7528\uff08BIOS interrupt call\uff09\uff1f\u5982\u4f55\u57fa\u672c\u5730\u8c03\u7528\u51fd\u6570\uff1f\u5982\u4f55\u57fa\u672c\u5730\u4f7f\u7528\u5b8f\uff1f \u5982\u4f55\u58f0\u660e\u4e00\u4e2a\u50cf\u5e38\u91cf\u7684\u4e1c\u897f\uff1f\u5982\u4f55\u58f0\u660e\u4e00\u4e2a\u50cf\u53d8\u91cf\u7684\u4e1c\u897f\uff1f \u4e0d\u8981\u7ea0\u7ed3\u5728\u4e0a\u8ff0\u95ee\u9898\u4e0a\uff0c\u5927\u81f4\u660e\u767d\u5373\u53ef\u3002 \u63a5\u4e0b\u6765\u6211\u4eec\u5c06\u67e5\u770b\u4e00\u4efd\u4e0d\u5b8c\u5168\u3001\u4f46\u80fd\u5de5\u4f5c\u7684 bootloader \u7684\u4ee3\u7801\uff1a \u9996\u5148\u662f\u73af\u5883\u914d\u7f6e\u3002 \u8bf7\u786e\u4fdd\u4f60\u76ee\u524d\u4f7f\u7528\u7684\u662f \u5177\u6709\u56fe\u5f62\u754c\u9762\u7684 Ubuntu \u865a\u62df\u673a \uff08\u5982\u679c\u4f7f\u7528\u5176\u4ed6\u53d1\u884c\u7248\uff0c\u8bf7\u53c2\u7167\u4e0b\u65b9\u81ea\u884c\u5904\u7406\uff0c\u4e00\u822c\u4e0d\u4f1a\u51fa\u73b0\u5947\u602a\u7684\u95ee\u9898\uff09\uff0c\u8fd0\u884c\u4ee5\u4e0b\u6307\u4ee4\uff1a # \u5b89\u88c5\u5de5\u5177 sudo apt install nasm qemu make \u7136\u540e\u4ece\u6b64\u5904\u83b7\u5f97\u4ee3\u7801\uff1a bootloader-x86.tar.xz \u5e76\u89e3\u538b\u83b7\u5f97\u6e90\u7801\u3002 \u8fd9\u4efd\u4ee3\u7801\u7684\u5165\u53e3\u662f boot.asm \u6587\u4ef6\uff0c\u4e4b\u540e\u4f1a\u8fd0\u884c loader.asm \u6587\u4ef6\u3002 kernel.asm \u4e0d\u4f1a\u88ab\u8fd0\u884c\u3002 \u5176\u4f59\u4e24\u4e2a fat12.inc \u548c log.inc \u6587\u4ef6\u53ef\u4ee5\u7c7b\u6bd4\u505a C \u4e2d\u7684\u5934\u6587\u4ef6\u3001\u4f1a\u88ab\u5b8f\u5185\u8fde\u5230\u524d\u9762\u7684\u4e24\u4e2a\u6587\u4ef6\u4e2d\u3002 \u6b64\u4ee3\u7801\u5e26\u6709\u4e00\u4efd Makefile \uff0c\u8bb0\u8f7d\u4e86\u5982\u4f55\u5b8c\u6210\u7f16\u8bd1\u548c\u6d4b\u8bd5\u3002 \u8bf7\u9605\u8bfb Makefile \u5185\u5bb9\uff0c\u4f7f\u7528\u6b63\u786e\u7684\u6307\u4ee4\u5b8c\u6210\u7f16\u8bd1\u3002\uff081 \u5206\uff09 \u73b0\u5728\uff0c\u8bf7\u4ece\u4ee5\u4e0b\u51e0\u4e2a\u95ee\u9898\u4e2d\u9009\u62e9 2 \u4e2a\uff08\u5171 1 \u5206\uff09\uff0c\u67e5\u9605\u76f8\u5173\u8d44\u6599\u540e\u7b80\u8981\u56de\u7b54\uff1a xor ax, ax \u4f7f\u7528\u4e86\u5f02\u6216\u64cd\u4f5c xor \uff0c\u8fd9\u662f\u5728\u5e72\u4ec0\u4e48\uff1f\u8fd9\u4e48\u505a\u6709\u4ec0\u4e48\u597d\u5904\u5462\uff1f jmp $ \u53c8\u662f\u5728\u5e72\u4ec0\u4e48\uff1f [es:di] \u662f\u4e00\u4e2a\u5bfb\u5740\u64cd\u4f5c\uff0c\u8fd9\u662f\u5728\u5bfb\u5740\u5185\u5b58\u7684\u54ea\u4e2a\u5730\u5740\u5462\uff1f boot.asm \u6587\u4ef6\u524d\u4fa7\u7684 org 0x7c00 \u6709\u4ec0\u4e48\u7528\uff1f times 510 - ($ - $$) db 0 \u662f\u5728\u5e72\u4ec0\u4e48\uff1f\u4e3a\u4ec0\u4e48\u8981\u8fd9\u4e48\u505a\u5462\uff1f\u4e3a\u4ec0\u4e48\u8fd9\u91cc\u6709\u4e00\u4e2a 510 \uff1f \u518d\u5728\u4ece\u4ee5\u4e0b\u51e0\u4e2a\u95ee\u9898\u4e2d\u9009\u62e9 1 \u4e2a\uff081 \u5206\uff09\uff0c\u7b80\u5355\u4e86\u89e3\u4ee3\u7801\u6d41\u7a0b\u540e\u7b80\u8981\u56de\u7b54\uff1a \u5c1d\u8bd5\u4fee\u6539\u4ee3\u7801\uff0c\u5728\u76ee\u524d\u5df2\u6709\u7684\u8f93\u51fa\u4e2d\u589e\u52a0\u4e00\u884c\u8f93\u51fa\u201cI am OK!\u201d\uff0c\u6837\u5f0f\u4e0d\u9650\uff0c\u4f4d\u7f6e\u4e0d\u9650\uff0c\u4f46\u4e0d\u80fd\u8986\u76d6\u5176\u4ed6\u7684\u8f93\u51fa\uff1b \u901a\u8fc7 boot.asm \u6587\u4ef6\u53ca\u76f8\u5e94\u7684\u5176\u4ed6\u8d44\u6599\uff0c\u7b80\u5355\u63cf\u8ff0 BIOS Boot \u662f\u600e\u4e48\u786e\u5b9a\u4e00\u4e2a\u8f6f\u76d8\uff08floppy\uff09\u662f\u53ef\u542f\u52a8\uff08bootable\uff09\u7684\uff1f \u4e3a\u4ec0\u4e48 boot.asm \u6267\u884c\u4e4b\u540e\u53ef\u4ee5\u7ee7\u7eed\u6267\u884c loader.asm \uff1f \u4e3a\u4ec0\u4e48\u8981\u7528 boot.asm \u548c loader.asm \u4e24\u4e2a\u6587\u4ef6\uff1f\u628a\u4ee3\u7801\u5199\u5728\u4e00\u4e2a\u6587\u4ef6\u91cc\u4e0d\u597d\u5417\uff1f \u518d\u63a5\u4e0b\u6765\u51e0\u4e2a\u95ee\u9898\u4e0d\u4f1a\u7ed9\u5206\uff0c\u4f46\u5982\u679c\u4f60\u505a\u51fa\u6765\u4e86\u52a9\u6559\u4f1a\u4e3a\u4f60\u9f13\u638c\uff1a \u8fd9\u4e9b\u4ee3\u7801\u662f\u4e0d\u5b8c\u5168\u7684\uff0c\u5c1d\u8bd5\u8865\u5168\u8fd9\u4e9b\u4ee3\u7801\uff0c\u4f7f\u5f97 kernel.asm \u53ef\u4ee5\u88ab\u8fd0\u884c\uff1b \u540c\u6837\u662f\u5c1d\u8bd5\u8865\u5168\u8fd9\u4e9b\u4ee3\u7801\uff0c\u4f7f\u5f97\u7cfb\u7edf\u8fdb\u5165\u957f\u6a21\u5f0f\uff08long mode\uff09\uff1b \u53c8\u540c\u6837\u662f\u5c1d\u8bd5\u8865\u5168\u8fd9\u4e9b\u4ee3\u7801\uff0c\u4f7f\u5f97\u7cfb\u7edf\u7684\u8fd0\u884c\u53ef\u4ee5\u8df3\u8f6c\u5230\u4f60\u81ea\u884c\u589e\u6dfb\u7684 C/C++/Rust \u4ee3\u7801\u4e0a\uff1b \u6216\u8005\u81ea\u884c\u5b9e\u73b0\u53e6\u4e00\u5957\u7684 UEFI Boot\uff1b","title":"\u521d\u8bc6 Boot"},{"location":"lab-1/init/","text":"\u6784\u5efa\u521d\u59cb\u5185\u5b58\u76d8 \u00b6 \u4e00\u4e2a\u7b80\u5355\u7684\u4f8b\u5b50 \u00b6 init.c : #include <stdio.h> int main () { printf ( \"TaokyStrong! \\n \" ); return 0 ; } \u9759\u6001\u94fe\u63a5\u7f16\u8bd1: aarch64-linux-gnu-gcc -static init.c -o init \u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u76ee\u5f55\u7528\u4e8e\u653e\u7f6e\u6587\u4ef6\u3002\u5728\u65b0\u7684\u76ee\u5f55\u4e0b\u6253\u5305 initrd\uff1a find . | cpio --quiet -H newc -o | gzip -9 -n > ../initrd.cpio.gz \u5728 QEMU \u4e2d\u8fd0\u884c: qemu-system-aarch64 \\ -kernel linux/arch/arm64/boot/Image \\ -initrd initrd.cpio.gz \\ -dtb tools/boot_utils/bcm2710-rpi-3-b-plus.dtb \\ -M raspi3 -m 1024 \\ -serial stdio \\ -append \"rw loglevel=8\" \u521b\u5efa\u8bbe\u5907\u6587\u4ef6 \u00b6 \u4ee5 /dev/fb0 \u4e3a\u4f8b: \u4f5c\u4e3a\u4e00\u4e2a\u8bbe\u5907\u6587\u4ef6\uff0c\u5bf9 /dev/fb0 \u6587\u4ef6\u7684\u8bfb\u5199\u7b49\u64cd\u4f5c\u5b9e\u9645\u4e0a\u662f\u5728\u64cd\u4f5c framebuffer, \u5728\u786c\u4ef6\u8bbe\u5907\u4e0a\u7684\u53cd\u6620\u5c31\u662f\u5c4f\u5e55\u7684\u56fe\u50cf\u8f93\u51fa\u7b49. \u4e32\u53e3\u8bbe\u5907 /dev/ttyS0 \u540c\u7406. \u5728 Linux \u4e2d\u4e3b\u8981\u6709\u4e24\u7c7b\u8bbe\u5907\u6587\u4ef6\uff1a\u5757\u8bbe\u5907\u6587\u4ef6\uff08\u6709\u7f13\u51b2\uff09\u3001\u5b57\u7b26\u8bbe\u5907\u6587\u4ef6\uff08\u65e0\u7f13\u51b2\uff09\u3002 \u5757\u8bbe\u5907 (b)\uff1a\u4ee5\u5757\u4e3a\u5355\u4f4d\u4e0e\u786c\u4ef6\u8bbe\u5907\u4f20\u8f93\u6587\u4ef6\u3002\u5bf9\u5b83\u7684\u5199\u5165\u64cd\u4f5c\u4f1a\u88ab\u7f13\u5b58\uff0c\u7531\u5185\u6838\u5728\u5408\u9002\u7684\u65f6\u5019\u53d1\u9001\u7ed9\u786c\u4ef6\u3002 \u5b57\u7b26\u8bbe\u5907 (c)\uff1a\u4ee5\u5b57\u8282\u4e3a\u5355\u4f4d\u4e0e\u786c\u4ef6\u8bbe\u5907\u4f20\u8f93\u6587\u4ef6\u3002 \u8bbe\u5907\u6587\u4ef6\u9700\u8981\u4f7f\u7528 mknod \u521b\u5efa\u3002\u5728\u521b\u5efa\u65f6\uff0c\u8fd8\u9700\u8981\u63d0\u4f9b\u4e3b\u8bbe\u5907\u53f7 (Major) \u548c\u6b21\u8bbe\u5907\u53f7 (Minor)\u3002\u8bbe\u5907\u6587\u4ef6\u4e00\u822c\u4f4d\u4e8e /dev/ \uff0c\u53ef\u4ee5\u4f7f\u7528 ls -l \u67e5\u770b\u5b83\u4eec\u7684\u4fe1\u606f\u3002 $ ls -l /dev/null crw-rw-rw- 1 root root 1, 3 Feb 14 20:27 /dev/null $ ls -l /dev/sda brw-rw---- 1 root disk 8, 0 Feb 14 20:27 /dev/sda \u8fd9\u91cc\u53ef\u4ee5\u770b\u5230\uff0c\u7a7a\u8bbe\u5907 ( /dev/null ) \u4e3a\u5b57\u7b26\u8bbe\u5907 (c)\uff0c\u4e3b\u8bbe\u5907\u53f7\u4e3a 1\uff0c\u6b21\u8bbe\u5907\u53f7\u4e3a 3\u3002\u7b2c\u4e00\u5757\u786c\u76d8\u5bf9\u5e94\u7684\u8bbe\u5907 ( /dev/sda ) \u4e3a\u5757\u8bbe\u5907 (b)\uff0c\u4e3b\u8bbe\u5907\u53f7\u4e3a 8\uff0c\u6b21\u8bbe\u5907\u53f7\u4e3a 0\u3002 \u4f60\u9700\u8981\u5728\u6267\u884c\u6d4b\u8bd5\u7a0b\u5e8f\u4e4b\u524d\u5148\u7528 mknod \u521b\u5efa\u5bf9\u5e94\u8bbe\u5907\u6587\u4ef6. \u5df2\u77e5 /dev/ttyS0 \u4e3a\u5b57\u7b26\u8bbe\u5907\u6587\u4ef6\uff0c\u4e3b\u8bbe\u5907\u53f7\u4e3a 4\uff0c\u6b21\u8bbe\u5907\u53f7\u4e3a 64\uff1b /dev/ttyAMA0 \u4e3a\u5b57\u7b26\u8bbe\u5907\u6587\u4ef6\uff0c\u4e3b\u8bbe\u5907\u53f7\u4e3a 204\uff0c\u6b21\u8bbe\u5907\u53f7\u4e3a 64\uff1b /dev/fb0 \u4e3a\u5b57\u7b26\u8bbe\u5907\u6587\u4ef6\uff0c\u4e3b\u8bbe\u5907\u53f7\u4e3a 29\uff0c\u6b21\u8bbe\u5907\u53f7\u4e3a 0\u3002 \u4f60\u53ef\u4ee5\u4f7f\u7528 man 1 mknod \u67e5\u770b mknod \u7a0b\u5e8f\u7684\u5e2e\u52a9\uff0c\u4f7f\u7528 man 2 mknod \u67e5\u770b mknod \u7cfb\u7edf\u8c03\u7528\u7684\u5e2e\u52a9\u3002\u8fd9\u4e24\u8005\u90fd\u9700\u8981\u6700\u9ad8\u7528\u6237\u6743\u9650\u3002 \u4ee5\u4e0b\u662f\u4e00\u4e2a\u5728 C \u8bed\u8a00\u4e2d\u4f7f\u7528 mknod() \u7cfb\u7edf\u8c03\u7528\uff0c\u5728\u5f53\u524d\u76ee\u5f55\u521b\u5efa\u7a7a\u8bbe\u5907\u6587\u4ef6 (null) \u7684\u793a\u4f8b\uff1a #include <stdio.h> #include <sys/types.h> #include <sys/stat.h> #include <fcntl.h> #include <unistd.h> #include <sys/sysmacros.h> int main() { if (mknod(\"./null\", S_IFCHR | S_IRUSR | S_IWUSR, makedev(1, 3)) == -1) { perror(\"mknod() failed\"); } return 0; } $ gcc mknod_example.c -o mknod_example $ sudo ./mknod_example $ ls -l null crw------- 1 root root 1, 3 Mar 1 17:10 null \u4f60\u53ef\u4ee5\u9009\u62e9: \u5728 init \u6267\u884c\u8fc7\u7a0b\u4e2d\u521b\u5efa\u8bbe\u5907\u6587\u4ef6. (\u63a8\u8350) \u5148\u4f7f\u7528 mknod \u521b\u5efa\u8bbe\u5907\u6587\u4ef6\uff0c\u7136\u540e\u518d\u6253\u5305 initrd (\u4e0d\u63a8\u8350). \u5982\u679c\u4e00\u5b9a\u60f3\u8fd9\u4e48\u505a\u8bf7\u6ce8\u610f\u4e0d\u8981\u5199\u5165\u9519\u8bef\u7684\u4e3b\u6b21\u8bbe\u5907\u548c\u907f\u514d\u786c\u4ef6\u635f\u574f. \u5982\u679c\u5728 Vlab \u5e73\u53f0\u4e0a\u5e76\u4e0d\u80fd\u76f4\u63a5 mknod, \u9700\u8981\u4f7f\u7528 fakeroot \u73af\u5883, \u53c2\u8003\u64cd\u4f5c . \u5173\u4e8e\u6d4b\u8bd5\u7a0b\u5e8f \u00b6 \u5728\u63d0\u4f9b\u7684 tools.tar.gz \u4e2d\u7684 binary \u6587\u4ef6\u5939\u4e0b\u6709 3 \u4e2a\u6d4b\u8bd5\u7a0b\u5e8f. \u7a0b\u5e8f 1: \u8c03\u7528 Linux \u4e0b\u7684\u7cfb\u7edf\u8c03\u7528, \u6bcf\u9694 1 \u79d2\u663e\u793a\u4e00\u884c\u4fe1\u606f, \u5171\u663e\u793a 4 \u6761\u6d88\u606f. \u7a0b\u5e8f 2: \u5411\u4e32\u53e3\u8f93\u51fa\u4e00\u6761\u4fe1\u606f\u3002\u6b64\u7a0b\u5e8f\u4f9d\u8d56 /dev/ttyS0 \u6216 /dev/ttyAMA0 \u8bbe\u5907\u6587\u4ef6\u3002(\u5177\u4f53\u770b \u6811\u8393\u6d3e\u5b98\u65b9\u5bf9\u4e8e\u4e32\u53e3\u7684\u8bf4\u660e ) \u7a0b\u5e8f 3: \u5728 TTY \u4e2d\u4f7f\u7528 Framebuffer \u663e\u793a\u4e00\u5f20\u56fe\u7247\u3002\u6b64\u7a0b\u5e8f\u4f9d\u8d56 /dev/fb0 \u8bbe\u5907\u6587\u4ef6\u3002 \u4f60\u9700\u8981\u505a\u7684\u662f\uff1a\u7f16\u5199\u4e00\u4e2a init \u7a0b\u5e8f\uff0c\u6267\u884c\u8fd9\u4e09\u4e2a\u7a0b\u5e8f\u3002\u5177\u4f53\u7684\u8981\u6c42\u89c1\u4ecb\u7ecd\u9875\u9762\u3002 \u8bd5\u8bd5 BusyBox (\u975e\u5fc5\u505a, \u4f46\u662f\u63a8\u8350\u73a9\u4e00\u73a9) \u00b6 BusyBox \u662f\u4e00\u4e2a\u5c06\u8bb8\u591a\u5e38\u7528 Unix \u547d\u4ee4\u884c\u5de5\u5177\u6253\u5305\u8fdb\u4e00\u4e2a\u4e8c\u8fdb\u5236\u6587\u4ef6\u7684\u9879\u76ee\uff0c\u5728\u5d4c\u5165\u5f0f\u7cfb\u7edf\u7b49\u5b58\u50a8\u7a7a\u95f4\u6709\u9650\u7684\u73af\u5883\u4e2d\u975e\u5e38\u5e38\u89c1\u3002\u4f60\u53ef\u4ee5\u9009\u62e9\u4f7f\u7528 BusyBox \u63d0\u4f9b\u7684\u5de5\u5177\u6765\u7f16\u5199\u4f60\u7684 init \u7a0b\u5e8f\uff0c\u5e76\u6253\u5305 initrd. BusyBox \u5b98\u65b9\u6ca1\u6709\u63d0\u4f9b\u7f16\u8bd1\u597d\u7684 arm64 \u7248\u672c. \u65b9\u4fbf\u8d77\u89c1\u53ef\u4ee5\u76f4\u63a5\u4e0b\u8f7d \u52a9\u6559\u7f16\u8bd1\u597d\u7684 binary . \u4e5f\u53ef\u4ee5\u81ea\u884c\u7f16\u8bd1, \u6e90\u7801\u4e0b\u8f7d . \u5236\u4f5c initrd \u00b6 BusyBox \u7684\u7279\u70b9\u4e4b\u4e00\u662f\uff0c\u5982\u679c\u4f60\u4f7f\u7528\u67d0\u4e2a\u652f\u6301\u7684\u522b\u540d\u6765\u8fd0\u884c\u5b83\uff0c\u5b83\u5c31\u4f1a\u50cf\u90a3\u6761\u547d\u4ee4\u4e00\u6837\u5de5\u4f5c. \u521b\u5efa\u7b26\u53f7\u94fe\u63a5\u662f\u6700\u5e38\u89c1\u7684\u4ee5\u522b\u540d\u4f7f\u7528 BusyBox \u7684\u65b9\u5f0f. chmod 755 busybox mkdir -p rootfs/bin/ mv busybox rootfs/bin/ cd rootfs/bin/ for item in $(./busybox --list) do ln -s busybox $item done \u6ce8: \u5176\u4e2d ./busybox --list \u9700\u8981\u5b89\u88c5 qemu-user \u624d\u80fd\u5728 x86 \u73af\u5883\u4e0b\u6210\u529f\u6267\u884c. rootfs/init : #!/bin/sh /bin/sh \u8bb0\u5f97\u7ed9\u8fd9\u4e2a init \u6587\u4ef6\u52a0\u4e0a\u6267\u884c\u6743\u9650 chmod +x init \u6309\u7167\u524d\u9762\u7684\u6559\u7a0b\u5c06 rootfs/ \u76ee\u5f55\u6253\u5305\u4e3a initrd.cpio.gz \uff0c\u5e76\u4f7f\u7528 QEMU \u542f\u52a8\uff0c\u4f60\u5c31\u6709 shell \u53ef\u4ee5\u73a9\u4e86 :D hint: \u6709 /bin/mknod","title":"\u6784\u5efa\u521d\u59cb\u5185\u5b58\u76d8"},{"location":"lab-1/init/#_1","text":"","title":"\u6784\u5efa\u521d\u59cb\u5185\u5b58\u76d8"},{"location":"lab-1/init/#_2","text":"init.c : #include <stdio.h> int main () { printf ( \"TaokyStrong! \\n \" ); return 0 ; } \u9759\u6001\u94fe\u63a5\u7f16\u8bd1: aarch64-linux-gnu-gcc -static init.c -o init \u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u76ee\u5f55\u7528\u4e8e\u653e\u7f6e\u6587\u4ef6\u3002\u5728\u65b0\u7684\u76ee\u5f55\u4e0b\u6253\u5305 initrd\uff1a find . | cpio --quiet -H newc -o | gzip -9 -n > ../initrd.cpio.gz \u5728 QEMU \u4e2d\u8fd0\u884c: qemu-system-aarch64 \\ -kernel linux/arch/arm64/boot/Image \\ -initrd initrd.cpio.gz \\ -dtb tools/boot_utils/bcm2710-rpi-3-b-plus.dtb \\ -M raspi3 -m 1024 \\ -serial stdio \\ -append \"rw loglevel=8\"","title":"\u4e00\u4e2a\u7b80\u5355\u7684\u4f8b\u5b50"},{"location":"lab-1/init/#_3","text":"\u4ee5 /dev/fb0 \u4e3a\u4f8b: \u4f5c\u4e3a\u4e00\u4e2a\u8bbe\u5907\u6587\u4ef6\uff0c\u5bf9 /dev/fb0 \u6587\u4ef6\u7684\u8bfb\u5199\u7b49\u64cd\u4f5c\u5b9e\u9645\u4e0a\u662f\u5728\u64cd\u4f5c framebuffer, \u5728\u786c\u4ef6\u8bbe\u5907\u4e0a\u7684\u53cd\u6620\u5c31\u662f\u5c4f\u5e55\u7684\u56fe\u50cf\u8f93\u51fa\u7b49. \u4e32\u53e3\u8bbe\u5907 /dev/ttyS0 \u540c\u7406. \u5728 Linux \u4e2d\u4e3b\u8981\u6709\u4e24\u7c7b\u8bbe\u5907\u6587\u4ef6\uff1a\u5757\u8bbe\u5907\u6587\u4ef6\uff08\u6709\u7f13\u51b2\uff09\u3001\u5b57\u7b26\u8bbe\u5907\u6587\u4ef6\uff08\u65e0\u7f13\u51b2\uff09\u3002 \u5757\u8bbe\u5907 (b)\uff1a\u4ee5\u5757\u4e3a\u5355\u4f4d\u4e0e\u786c\u4ef6\u8bbe\u5907\u4f20\u8f93\u6587\u4ef6\u3002\u5bf9\u5b83\u7684\u5199\u5165\u64cd\u4f5c\u4f1a\u88ab\u7f13\u5b58\uff0c\u7531\u5185\u6838\u5728\u5408\u9002\u7684\u65f6\u5019\u53d1\u9001\u7ed9\u786c\u4ef6\u3002 \u5b57\u7b26\u8bbe\u5907 (c)\uff1a\u4ee5\u5b57\u8282\u4e3a\u5355\u4f4d\u4e0e\u786c\u4ef6\u8bbe\u5907\u4f20\u8f93\u6587\u4ef6\u3002 \u8bbe\u5907\u6587\u4ef6\u9700\u8981\u4f7f\u7528 mknod \u521b\u5efa\u3002\u5728\u521b\u5efa\u65f6\uff0c\u8fd8\u9700\u8981\u63d0\u4f9b\u4e3b\u8bbe\u5907\u53f7 (Major) \u548c\u6b21\u8bbe\u5907\u53f7 (Minor)\u3002\u8bbe\u5907\u6587\u4ef6\u4e00\u822c\u4f4d\u4e8e /dev/ \uff0c\u53ef\u4ee5\u4f7f\u7528 ls -l \u67e5\u770b\u5b83\u4eec\u7684\u4fe1\u606f\u3002 $ ls -l /dev/null crw-rw-rw- 1 root root 1, 3 Feb 14 20:27 /dev/null $ ls -l /dev/sda brw-rw---- 1 root disk 8, 0 Feb 14 20:27 /dev/sda \u8fd9\u91cc\u53ef\u4ee5\u770b\u5230\uff0c\u7a7a\u8bbe\u5907 ( /dev/null ) \u4e3a\u5b57\u7b26\u8bbe\u5907 (c)\uff0c\u4e3b\u8bbe\u5907\u53f7\u4e3a 1\uff0c\u6b21\u8bbe\u5907\u53f7\u4e3a 3\u3002\u7b2c\u4e00\u5757\u786c\u76d8\u5bf9\u5e94\u7684\u8bbe\u5907 ( /dev/sda ) \u4e3a\u5757\u8bbe\u5907 (b)\uff0c\u4e3b\u8bbe\u5907\u53f7\u4e3a 8\uff0c\u6b21\u8bbe\u5907\u53f7\u4e3a 0\u3002 \u4f60\u9700\u8981\u5728\u6267\u884c\u6d4b\u8bd5\u7a0b\u5e8f\u4e4b\u524d\u5148\u7528 mknod \u521b\u5efa\u5bf9\u5e94\u8bbe\u5907\u6587\u4ef6. \u5df2\u77e5 /dev/ttyS0 \u4e3a\u5b57\u7b26\u8bbe\u5907\u6587\u4ef6\uff0c\u4e3b\u8bbe\u5907\u53f7\u4e3a 4\uff0c\u6b21\u8bbe\u5907\u53f7\u4e3a 64\uff1b /dev/ttyAMA0 \u4e3a\u5b57\u7b26\u8bbe\u5907\u6587\u4ef6\uff0c\u4e3b\u8bbe\u5907\u53f7\u4e3a 204\uff0c\u6b21\u8bbe\u5907\u53f7\u4e3a 64\uff1b /dev/fb0 \u4e3a\u5b57\u7b26\u8bbe\u5907\u6587\u4ef6\uff0c\u4e3b\u8bbe\u5907\u53f7\u4e3a 29\uff0c\u6b21\u8bbe\u5907\u53f7\u4e3a 0\u3002 \u4f60\u53ef\u4ee5\u4f7f\u7528 man 1 mknod \u67e5\u770b mknod \u7a0b\u5e8f\u7684\u5e2e\u52a9\uff0c\u4f7f\u7528 man 2 mknod \u67e5\u770b mknod \u7cfb\u7edf\u8c03\u7528\u7684\u5e2e\u52a9\u3002\u8fd9\u4e24\u8005\u90fd\u9700\u8981\u6700\u9ad8\u7528\u6237\u6743\u9650\u3002 \u4ee5\u4e0b\u662f\u4e00\u4e2a\u5728 C \u8bed\u8a00\u4e2d\u4f7f\u7528 mknod() \u7cfb\u7edf\u8c03\u7528\uff0c\u5728\u5f53\u524d\u76ee\u5f55\u521b\u5efa\u7a7a\u8bbe\u5907\u6587\u4ef6 (null) \u7684\u793a\u4f8b\uff1a #include <stdio.h> #include <sys/types.h> #include <sys/stat.h> #include <fcntl.h> #include <unistd.h> #include <sys/sysmacros.h> int main() { if (mknod(\"./null\", S_IFCHR | S_IRUSR | S_IWUSR, makedev(1, 3)) == -1) { perror(\"mknod() failed\"); } return 0; } $ gcc mknod_example.c -o mknod_example $ sudo ./mknod_example $ ls -l null crw------- 1 root root 1, 3 Mar 1 17:10 null \u4f60\u53ef\u4ee5\u9009\u62e9: \u5728 init \u6267\u884c\u8fc7\u7a0b\u4e2d\u521b\u5efa\u8bbe\u5907\u6587\u4ef6. (\u63a8\u8350) \u5148\u4f7f\u7528 mknod \u521b\u5efa\u8bbe\u5907\u6587\u4ef6\uff0c\u7136\u540e\u518d\u6253\u5305 initrd (\u4e0d\u63a8\u8350). \u5982\u679c\u4e00\u5b9a\u60f3\u8fd9\u4e48\u505a\u8bf7\u6ce8\u610f\u4e0d\u8981\u5199\u5165\u9519\u8bef\u7684\u4e3b\u6b21\u8bbe\u5907\u548c\u907f\u514d\u786c\u4ef6\u635f\u574f. \u5982\u679c\u5728 Vlab \u5e73\u53f0\u4e0a\u5e76\u4e0d\u80fd\u76f4\u63a5 mknod, \u9700\u8981\u4f7f\u7528 fakeroot \u73af\u5883, \u53c2\u8003\u64cd\u4f5c .","title":"\u521b\u5efa\u8bbe\u5907\u6587\u4ef6"},{"location":"lab-1/init/#_4","text":"\u5728\u63d0\u4f9b\u7684 tools.tar.gz \u4e2d\u7684 binary \u6587\u4ef6\u5939\u4e0b\u6709 3 \u4e2a\u6d4b\u8bd5\u7a0b\u5e8f. \u7a0b\u5e8f 1: \u8c03\u7528 Linux \u4e0b\u7684\u7cfb\u7edf\u8c03\u7528, \u6bcf\u9694 1 \u79d2\u663e\u793a\u4e00\u884c\u4fe1\u606f, \u5171\u663e\u793a 4 \u6761\u6d88\u606f. \u7a0b\u5e8f 2: \u5411\u4e32\u53e3\u8f93\u51fa\u4e00\u6761\u4fe1\u606f\u3002\u6b64\u7a0b\u5e8f\u4f9d\u8d56 /dev/ttyS0 \u6216 /dev/ttyAMA0 \u8bbe\u5907\u6587\u4ef6\u3002(\u5177\u4f53\u770b \u6811\u8393\u6d3e\u5b98\u65b9\u5bf9\u4e8e\u4e32\u53e3\u7684\u8bf4\u660e ) \u7a0b\u5e8f 3: \u5728 TTY \u4e2d\u4f7f\u7528 Framebuffer \u663e\u793a\u4e00\u5f20\u56fe\u7247\u3002\u6b64\u7a0b\u5e8f\u4f9d\u8d56 /dev/fb0 \u8bbe\u5907\u6587\u4ef6\u3002 \u4f60\u9700\u8981\u505a\u7684\u662f\uff1a\u7f16\u5199\u4e00\u4e2a init \u7a0b\u5e8f\uff0c\u6267\u884c\u8fd9\u4e09\u4e2a\u7a0b\u5e8f\u3002\u5177\u4f53\u7684\u8981\u6c42\u89c1\u4ecb\u7ecd\u9875\u9762\u3002","title":"\u5173\u4e8e\u6d4b\u8bd5\u7a0b\u5e8f"},{"location":"lab-1/init/#busybox","text":"BusyBox \u662f\u4e00\u4e2a\u5c06\u8bb8\u591a\u5e38\u7528 Unix \u547d\u4ee4\u884c\u5de5\u5177\u6253\u5305\u8fdb\u4e00\u4e2a\u4e8c\u8fdb\u5236\u6587\u4ef6\u7684\u9879\u76ee\uff0c\u5728\u5d4c\u5165\u5f0f\u7cfb\u7edf\u7b49\u5b58\u50a8\u7a7a\u95f4\u6709\u9650\u7684\u73af\u5883\u4e2d\u975e\u5e38\u5e38\u89c1\u3002\u4f60\u53ef\u4ee5\u9009\u62e9\u4f7f\u7528 BusyBox \u63d0\u4f9b\u7684\u5de5\u5177\u6765\u7f16\u5199\u4f60\u7684 init \u7a0b\u5e8f\uff0c\u5e76\u6253\u5305 initrd. BusyBox \u5b98\u65b9\u6ca1\u6709\u63d0\u4f9b\u7f16\u8bd1\u597d\u7684 arm64 \u7248\u672c. \u65b9\u4fbf\u8d77\u89c1\u53ef\u4ee5\u76f4\u63a5\u4e0b\u8f7d \u52a9\u6559\u7f16\u8bd1\u597d\u7684 binary . \u4e5f\u53ef\u4ee5\u81ea\u884c\u7f16\u8bd1, \u6e90\u7801\u4e0b\u8f7d .","title":"\u8bd5\u8bd5 BusyBox (\u975e\u5fc5\u505a, \u4f46\u662f\u63a8\u8350\u73a9\u4e00\u73a9)"},{"location":"lab-1/init/#initrd","text":"BusyBox \u7684\u7279\u70b9\u4e4b\u4e00\u662f\uff0c\u5982\u679c\u4f60\u4f7f\u7528\u67d0\u4e2a\u652f\u6301\u7684\u522b\u540d\u6765\u8fd0\u884c\u5b83\uff0c\u5b83\u5c31\u4f1a\u50cf\u90a3\u6761\u547d\u4ee4\u4e00\u6837\u5de5\u4f5c. \u521b\u5efa\u7b26\u53f7\u94fe\u63a5\u662f\u6700\u5e38\u89c1\u7684\u4ee5\u522b\u540d\u4f7f\u7528 BusyBox \u7684\u65b9\u5f0f. chmod 755 busybox mkdir -p rootfs/bin/ mv busybox rootfs/bin/ cd rootfs/bin/ for item in $(./busybox --list) do ln -s busybox $item done \u6ce8: \u5176\u4e2d ./busybox --list \u9700\u8981\u5b89\u88c5 qemu-user \u624d\u80fd\u5728 x86 \u73af\u5883\u4e0b\u6210\u529f\u6267\u884c. rootfs/init : #!/bin/sh /bin/sh \u8bb0\u5f97\u7ed9\u8fd9\u4e2a init \u6587\u4ef6\u52a0\u4e0a\u6267\u884c\u6743\u9650 chmod +x init \u6309\u7167\u524d\u9762\u7684\u6559\u7a0b\u5c06 rootfs/ \u76ee\u5f55\u6253\u5305\u4e3a initrd.cpio.gz \uff0c\u5e76\u4f7f\u7528 QEMU \u542f\u52a8\uff0c\u4f60\u5c31\u6709 shell \u53ef\u4ee5\u73a9\u4e86 :D hint: \u6709 /bin/mknod","title":"\u5236\u4f5c initrd"},{"location":"lab-1/kernel/","text":"\u7f16\u8bd1\u5e76\u8fd0\u884c Linux \u5185\u6838 \u00b6 \u5b9e\u9a8c\u7528\u6811\u8393\u6d3e\u578b\u53f7\u4e3a raspberrypi 3b+\uff0c\u5e76\u8981\u6c42\u7f16\u8bd1 64bit \u5185\u6838\u3002 \u73af\u5883\u51c6\u5907 \u00b6 \u7f16\u8bd1 kernel\uff1aLinux \u7269\u7406\u673a/\u865a\u62df\u673a/WSL \u8fd0\u884c QEMU\uff1a\u9700\u8981\u56fe\u5f62\u754c\u9762 \u4e00\u4e9b\u53ef\u80fd\u7684\u7ec4\u5408\uff1a Windows \u4e0b\u5b89\u88c5 QEMU\uff0c\u7528 WSL2 \u7f16\u8bd1 kernel Linux \u670d\u52a1\u5668\u7f16\u8bd1 kernel\uff0c\u5b89\u88c5 QEMU \u5e76\u7528 X11 \u8f6c\u53d1\u56fe\u5f62\u754c\u9762 Vlab \u4f7f\u7528\u5305\u542b\u684c\u9762\u7684 Ubuntu 20.04 \u6b64\u5b9e\u9a8c\u6587\u6863\u4ee5\u5305\u542b\u684c\u9762\u7684 Ubuntu 20.04 (x86) \u4e3a\u4f8b (\u5176\u4ed6\u7cfb\u7edf\u548c\u67b6\u6784\u8bf7\u81ea\u884c\u5b89\u88c5\u6240\u9700\u8981\u7684\u73af\u5883)\u3002 \u914d\u7f6e\u4ea4\u53c9\u7f16\u8bd1\u73af\u5883 \u00b6 sudo apt install git bc bison flex libssl-dev make libc6-dev libncurses5-dev crossbuild-essential-arm64 \u5b89\u88c5 QEMU \u00b6 sudo apt install qemu qemu-user qemu-system-arm \u4e0b\u8f7d\u5e76\u89e3\u538b\u6e90\u7801 \u00b6 \u672c\u6b21\u5b9e\u9a8c\u91c7\u7528\u7684 \u6e90\u7801\u5730\u5740 \u7531\u4e8e\u4ece GitHub \u76f4\u63a5\u4e0b\u8f7d\u901f\u5ea6\u7f13\u6162\uff0c\u53ef\u4ee5\u4ece \u8fd9\u91cc \u4e0b\u8f7d\u3002 \u89e3\u538b\uff1a tar -xf linux-raspberrypi-kernel_1.20210108-1.tar.gz mv linux-raspberrypi-kernel_1.20210108-1 linux \u4e0b\u8f7d\u5176\u4ed6\u6587\u4ef6 \u00b6 \u4e0b\u8f7d tools.tar.gz \u91cc\u9762\u5305\u542b\u5728 QEMU \u4ee5\u53ca\u6811\u8393\u6d3e\u4e0a\u8fd0\u884c\u6240\u9700\u6587\u4ef6\u548c 3 \u4e2a\u6d4b\u8bd5\u7a0b\u5e8f\u3002 \u89e3\u538b\uff1a tar -xf tools.gz \u7f16\u8bd1\u5185\u6838 \u00b6 \u751f\u6210\u9ed8\u8ba4\u914d\u7f6e\uff1a cd linux KERNEL=kernel8 make ARCH=arm64 CROSS_COMPILE=aarch64-linux-gnu- bcmrpi3_defconfig \u4f7f\u7528\u56fe\u5f62\u754c\u9762\u7f16\u8f91\u914d\u7f6e (\u5982\u679c\u4e0d\u719f\u6089\u9009\u9879\uff0c\u63a8\u8350\u5148\u7f16\u8bd1\u4e00\u6b21\u672a\u88c1\u526a\u7684\u5185\u6838)\uff0c\u5982\u679c\u5bf9\u9009\u9879\u6709\u7591\u95ee\u53ef\u4ee5\u591a\u4f7f\u7528 ? \u67e5\u770b\u8bf4\u660e\u3002 KERNEL=kernel8 make ARCH=arm64 CROSS_COMPILE=aarch64-linux-gnu- menuconfig \u7f16\u8bd1\uff1a KERNEL=kernel8 make ARCH=arm64 CROSS_COMPILE=aarch64-linux-gnu- Image modules dtbs \u7f16\u8bd1\u65f6\u53ef\u4ee5\u52a0\u4e0a\u53c2\u6570 -j n \u4ee5\u52a0\u5feb\u901f\u5ea6\uff0c\u6839\u636e\u5b98\u65b9\u8bf4\u6cd5\uff0c n \u5e94\u53d6\u4f60\u7684\u673a\u5668\u6838\u6570*1.5\uff1a KERNEL=kernel8 make ARCH=arm64 CROSS_COMPILE=aarch64-linux-gnu- Image modules dtbs -j n \u53c2\u8003\u65f6\u95f4\uff1a\u4f7f\u7528 Vlab \u5e73\u53f0\u865a\u62df\u673a(\u53cc\u6838)\uff0ctime \u7edf\u8ba1\u65f6\u95f4\u3002\u672a\u88c1\u526a\u5185\u6838\u7ea6 45 min\u3002 4407.53s user 513.19s system 181% cpu 45:04.30 total QEMU \u8fd0\u884c \u00b6 \u5982\u679c\u60f3\u5728\u6811\u8393\u6d3e\u4e2d\u8fd0\u884c\uff0c\u53c2\u8003\u540e\u7eed\u7ae0\u8282\u300c\u5728\u6811\u8393\u6d3e\u4e0a\u8fd0\u884c Linux \u5185\u6838\u548c init (\u9009\u505a)\u300d \u5728 QEMU \u4e2d\u8fd0\u884c\u7f16\u8bd1\u597d\u7684\u5185\u6838\u3002 qemu-system-aarch64 \\ -kernel linux/arch/arm64/boot/Image \\ -dtb tools/boot_utils/bcm2710-rpi-3-b-plus.dtb \\ -M raspi3 -m 1024 \\ -serial stdio \\ -append \"rw loglevel=8\" \u9884\u671f\u73b0\u8c61\u5e94\u662f\u770b\u5230 kernel panic\u3002 \u5982\u679c\u5e0c\u671b\u770b\u5230\u5b8c\u6574\u7684\u8f93\u51fa\uff0c\u53ef\u4ee5\u6539\u53c2\u6570 -append \"rw earlycon=pl011,0x3f201000 console=ttyAMA0 loglevel=8\" \u5c06\u5b83\u4eec\u4ece\u4e32\u53e3\u8f93\u51fa (\u5373\u8fde\u63a5\u5230 stdio)\u3002 \u5982\u679c\u4e0d\u5e0c\u671b\u770b\u5230\u592a\u591a log\uff0c\u53ef\u4ee5\u5c06 loglevel \u964d\u4f4e (\u6700\u4f4e\u4e3a 0)\u3002 \u8fd0\u884c RaspiOS (\u975e\u5fc5\u505a) \u00b6 \u5c1d\u8bd5\u5728 QEMU \u4e2d\u7528\u81ea\u5df1\u7f16\u8bd1\u7684\u5185\u6838\u8fd0\u884c RaspiOS\uff0c \u955c\u50cf\u4e0b\u8f7d \u3002 \u63a8\u8350\u7528\u672a\u88c1\u526a\u5185\u6838\u73a9\u800d\u3002 qemu-img resize ../2020-08-20-raspios-buster-arm64-lite.img 2G qemu-system-aarch64 \\ -kernel linux/arch/arm64/boot/Image \\ -dtb tools/boot_utils/bcm2710-rpi-3-b-plus.dtb \\ -M raspi3 -m 1024 \\ -serial stdio \\ -append \"rw loglevel=8 root=/dev/mmcblk0p2 fsck.repair=yes net.ifnames=0 rootwait memtest=1\" \\ -drive file=./2020-08-20-raspios-buster-arm64-lite.img,format=raw,if=sd \u9ed8\u8ba4\u7528\u6237\u540d pi \u5bc6\u7801 raspberry Have fun :D \u53c2\u8003\u8d44\u6599 \u00b6 \u6811\u8393\u5b98\u65b9\u6587\u6863\uff1a \u7f16\u8bd1\u5185\u6838 \u914d\u7f6e\u5185\u6838 Debian on QEMU\u2019s Raspberry Pi 3 model","title":"\u7f16\u8bd1 Linux \u5185\u6838"},{"location":"lab-1/kernel/#linux","text":"\u5b9e\u9a8c\u7528\u6811\u8393\u6d3e\u578b\u53f7\u4e3a raspberrypi 3b+\uff0c\u5e76\u8981\u6c42\u7f16\u8bd1 64bit \u5185\u6838\u3002","title":"\u7f16\u8bd1\u5e76\u8fd0\u884c Linux \u5185\u6838"},{"location":"lab-1/kernel/#_1","text":"\u7f16\u8bd1 kernel\uff1aLinux \u7269\u7406\u673a/\u865a\u62df\u673a/WSL \u8fd0\u884c QEMU\uff1a\u9700\u8981\u56fe\u5f62\u754c\u9762 \u4e00\u4e9b\u53ef\u80fd\u7684\u7ec4\u5408\uff1a Windows \u4e0b\u5b89\u88c5 QEMU\uff0c\u7528 WSL2 \u7f16\u8bd1 kernel Linux \u670d\u52a1\u5668\u7f16\u8bd1 kernel\uff0c\u5b89\u88c5 QEMU \u5e76\u7528 X11 \u8f6c\u53d1\u56fe\u5f62\u754c\u9762 Vlab \u4f7f\u7528\u5305\u542b\u684c\u9762\u7684 Ubuntu 20.04 \u6b64\u5b9e\u9a8c\u6587\u6863\u4ee5\u5305\u542b\u684c\u9762\u7684 Ubuntu 20.04 (x86) \u4e3a\u4f8b (\u5176\u4ed6\u7cfb\u7edf\u548c\u67b6\u6784\u8bf7\u81ea\u884c\u5b89\u88c5\u6240\u9700\u8981\u7684\u73af\u5883)\u3002","title":"\u73af\u5883\u51c6\u5907"},{"location":"lab-1/kernel/#_2","text":"sudo apt install git bc bison flex libssl-dev make libc6-dev libncurses5-dev crossbuild-essential-arm64","title":"\u914d\u7f6e\u4ea4\u53c9\u7f16\u8bd1\u73af\u5883"},{"location":"lab-1/kernel/#qemu","text":"sudo apt install qemu qemu-user qemu-system-arm","title":"\u5b89\u88c5 QEMU"},{"location":"lab-1/kernel/#_3","text":"\u672c\u6b21\u5b9e\u9a8c\u91c7\u7528\u7684 \u6e90\u7801\u5730\u5740 \u7531\u4e8e\u4ece GitHub \u76f4\u63a5\u4e0b\u8f7d\u901f\u5ea6\u7f13\u6162\uff0c\u53ef\u4ee5\u4ece \u8fd9\u91cc \u4e0b\u8f7d\u3002 \u89e3\u538b\uff1a tar -xf linux-raspberrypi-kernel_1.20210108-1.tar.gz mv linux-raspberrypi-kernel_1.20210108-1 linux","title":"\u4e0b\u8f7d\u5e76\u89e3\u538b\u6e90\u7801"},{"location":"lab-1/kernel/#_4","text":"\u4e0b\u8f7d tools.tar.gz \u91cc\u9762\u5305\u542b\u5728 QEMU \u4ee5\u53ca\u6811\u8393\u6d3e\u4e0a\u8fd0\u884c\u6240\u9700\u6587\u4ef6\u548c 3 \u4e2a\u6d4b\u8bd5\u7a0b\u5e8f\u3002 \u89e3\u538b\uff1a tar -xf tools.gz","title":"\u4e0b\u8f7d\u5176\u4ed6\u6587\u4ef6"},{"location":"lab-1/kernel/#_5","text":"\u751f\u6210\u9ed8\u8ba4\u914d\u7f6e\uff1a cd linux KERNEL=kernel8 make ARCH=arm64 CROSS_COMPILE=aarch64-linux-gnu- bcmrpi3_defconfig \u4f7f\u7528\u56fe\u5f62\u754c\u9762\u7f16\u8f91\u914d\u7f6e (\u5982\u679c\u4e0d\u719f\u6089\u9009\u9879\uff0c\u63a8\u8350\u5148\u7f16\u8bd1\u4e00\u6b21\u672a\u88c1\u526a\u7684\u5185\u6838)\uff0c\u5982\u679c\u5bf9\u9009\u9879\u6709\u7591\u95ee\u53ef\u4ee5\u591a\u4f7f\u7528 ? \u67e5\u770b\u8bf4\u660e\u3002 KERNEL=kernel8 make ARCH=arm64 CROSS_COMPILE=aarch64-linux-gnu- menuconfig \u7f16\u8bd1\uff1a KERNEL=kernel8 make ARCH=arm64 CROSS_COMPILE=aarch64-linux-gnu- Image modules dtbs \u7f16\u8bd1\u65f6\u53ef\u4ee5\u52a0\u4e0a\u53c2\u6570 -j n \u4ee5\u52a0\u5feb\u901f\u5ea6\uff0c\u6839\u636e\u5b98\u65b9\u8bf4\u6cd5\uff0c n \u5e94\u53d6\u4f60\u7684\u673a\u5668\u6838\u6570*1.5\uff1a KERNEL=kernel8 make ARCH=arm64 CROSS_COMPILE=aarch64-linux-gnu- Image modules dtbs -j n \u53c2\u8003\u65f6\u95f4\uff1a\u4f7f\u7528 Vlab \u5e73\u53f0\u865a\u62df\u673a(\u53cc\u6838)\uff0ctime \u7edf\u8ba1\u65f6\u95f4\u3002\u672a\u88c1\u526a\u5185\u6838\u7ea6 45 min\u3002 4407.53s user 513.19s system 181% cpu 45:04.30 total","title":"\u7f16\u8bd1\u5185\u6838"},{"location":"lab-1/kernel/#qemu_1","text":"\u5982\u679c\u60f3\u5728\u6811\u8393\u6d3e\u4e2d\u8fd0\u884c\uff0c\u53c2\u8003\u540e\u7eed\u7ae0\u8282\u300c\u5728\u6811\u8393\u6d3e\u4e0a\u8fd0\u884c Linux \u5185\u6838\u548c init (\u9009\u505a)\u300d \u5728 QEMU \u4e2d\u8fd0\u884c\u7f16\u8bd1\u597d\u7684\u5185\u6838\u3002 qemu-system-aarch64 \\ -kernel linux/arch/arm64/boot/Image \\ -dtb tools/boot_utils/bcm2710-rpi-3-b-plus.dtb \\ -M raspi3 -m 1024 \\ -serial stdio \\ -append \"rw loglevel=8\" \u9884\u671f\u73b0\u8c61\u5e94\u662f\u770b\u5230 kernel panic\u3002 \u5982\u679c\u5e0c\u671b\u770b\u5230\u5b8c\u6574\u7684\u8f93\u51fa\uff0c\u53ef\u4ee5\u6539\u53c2\u6570 -append \"rw earlycon=pl011,0x3f201000 console=ttyAMA0 loglevel=8\" \u5c06\u5b83\u4eec\u4ece\u4e32\u53e3\u8f93\u51fa (\u5373\u8fde\u63a5\u5230 stdio)\u3002 \u5982\u679c\u4e0d\u5e0c\u671b\u770b\u5230\u592a\u591a log\uff0c\u53ef\u4ee5\u5c06 loglevel \u964d\u4f4e (\u6700\u4f4e\u4e3a 0)\u3002","title":"QEMU \u8fd0\u884c"},{"location":"lab-1/kernel/#raspios","text":"\u5c1d\u8bd5\u5728 QEMU \u4e2d\u7528\u81ea\u5df1\u7f16\u8bd1\u7684\u5185\u6838\u8fd0\u884c RaspiOS\uff0c \u955c\u50cf\u4e0b\u8f7d \u3002 \u63a8\u8350\u7528\u672a\u88c1\u526a\u5185\u6838\u73a9\u800d\u3002 qemu-img resize ../2020-08-20-raspios-buster-arm64-lite.img 2G qemu-system-aarch64 \\ -kernel linux/arch/arm64/boot/Image \\ -dtb tools/boot_utils/bcm2710-rpi-3-b-plus.dtb \\ -M raspi3 -m 1024 \\ -serial stdio \\ -append \"rw loglevel=8 root=/dev/mmcblk0p2 fsck.repair=yes net.ifnames=0 rootwait memtest=1\" \\ -drive file=./2020-08-20-raspios-buster-arm64-lite.img,format=raw,if=sd \u9ed8\u8ba4\u7528\u6237\u540d pi \u5bc6\u7801 raspberry Have fun :D","title":"\u8fd0\u884c RaspiOS (\u975e\u5fc5\u505a)"},{"location":"lab-1/kernel/#_6","text":"\u6811\u8393\u5b98\u65b9\u6587\u6863\uff1a \u7f16\u8bd1\u5185\u6838 \u914d\u7f6e\u5185\u6838 Debian on QEMU\u2019s Raspberry Pi 3 model","title":"\u53c2\u8003\u8d44\u6599"},{"location":"lab-1/raspi/","text":"\u5728\u6811\u8393\u6d3e\u4e0a\u8fd0\u884c Linux \u5185\u6838\u548c init (\u9009\u505a) \u00b6 \u786c\u4ef6\u8bbe\u5907\u8981\u6c42 \u00b6 \u4e00\u53f0\u8ba1\u7b97\u673a\uff1b \u4e00\u4e2a Raspberry Pi 3 Model B+ \uff08\u542b\u7535\u6e90\uff09\uff1b \u4e00\u5f20 2G \u4ee5\u4e0a\u7684 microSD \u5361\uff1b \u4e00\u4e2a microSD \u8bfb\u5361\u5668\uff1b HDMI \u7ebf\u548c\u5c4f\u5e55 CP2102 USB \u8f6c\u4e32\u53e3\u6a21\u5757 \u7531\u4e8e\u9700\u6c42\u989d\u5916\u786c\u4ef6\uff0c\u5728\u6811\u8393\u6d3e\u5b9e\u4f53\u673a\u4e0a\u8fd0\u884c\u4e3a\u9009\u505a\uff0c\u6b22\u8fce\u611f\u5174\u8da3\u7684\u540c\u5b66\u79ef\u6781\u5c1d\u8bd5\u3002\u5982\u679c\u9009\u505a\u6b64\u9879\u8bf7\u5728\u5b9e\u9a8c\u62a5\u544a\u4e2d\u8bf4\u660e\uff0c\u6279\u6539\u65f6\u8bc4\u6d4b\u73af\u5883\u5c06\u53d8\u4e3a\u6811\u8393\u6d3e\u5b9e\u4f53\u673a (\u5982\u679c\u5728\u5b9e\u4f53\u673a\u4e0a\u548c\u9884\u671f\u8868\u73b0\u4e0d\u7b26\u4f1a\u518d\u7528 QEMU \u8bc4\u6d4b). \u867d\u7136\u76f8\u6bd4 QEMU \u6ca1\u6709\u989d\u5916\u52a0\u5206, \u4f46\u662f\u52a9\u6559\u4eec\u4f1a\u7ed9\u4f60\u9f13\u638c\u638c. \u6ce8\u610f\u4e8b\u9879 \u00b6 \u7531\u4e8e\u6811\u8393\u6d3e\u8c03\u8bd5\u76f8\u5bf9 QEMU \u66f4\u4e3a\u70e6\u7410, \u63a8\u8350\u914d\u5408\u4f7f\u7528 QEMU \u548c\u6811\u8393\u6d3e. \u9700\u8981\u6ce8\u610f\u4e32\u53e3\u76f8\u5173\u7684\u533a\u522b, \u5efa\u8bae\u9605\u8bfb\u6811\u8393\u6d3e\u5b98\u65b9\u5bf9\u4e8e\u4e32\u53e3\u7684 \u8bf4\u660e . \u901a\u8fc7 GPIO \u8fde\u63a5\u7684\u662f mini UART, \u5bf9\u5e94\u8bbe\u5907 /dev/ttyS0 . \u6d41\u7a0b \u00b6 SD \u5361\u4e0a\u521b\u5efa\u4e00\u4e2a fat32 \u5206\u533a, \u5e76\u6302\u8f7d \u5c06 boot_utils \u91cc\u7684\u5185\u5bb9, \u590d\u5236\u5230\u6302\u8f7d\u7684\u5206\u533a\u5185 \u5c06\u81ea\u5df1\u7f16\u8bd1\u7684 kernel \u548c \u6253\u5305\u7684 initrd \u590d\u5236\u8fdb\u6302\u8f7d\u7684\u5206\u533a\u5185, \u5e76\u547d\u540d\u4e3a kernel8.img \u548c initrd.cpio.gz umount \u8be5\u5206\u533a, \u518d\u53d6\u51fa SD\u5361 SD \u5361\u653e\u5165\u6811\u8393\u6d3e, \u8fde\u63a5\u663e\u793a\u5668\u548c\u4e32\u53e3\u6a21\u5757, \u6253\u5f00\u4e32\u53e3\u7ec8\u7aef (\u5982 Putty), \u518d\u63a5\u901a\u7535\u6e90. \u89c2\u5bdf\u663e\u793a\u5668\u548c\u4e32\u53e3\u7ec8\u7aef\u4e0a\u7684\u8f93\u51fa. config.txt \u5185\u5bb9\u8bf4\u660e \u00b6 tools/boot_utils/config.txt \u5185\u5bb9: arm_64bit=1 #\u542f\u52a8 64-bit \u5185\u6838, \u9ed8\u8ba4 kernel=kernel8.img initramfs initrd.cpio.gz followkernel #\u8bbe\u7f6e initrd \u6587\u4ef6\u540d, \u8bbe\u7f6e\u52a0\u8f7d\u5730\u5740\u4e3a followkernel enable_uart=1 #\u5f00\u542f mini UART \u4e32\u53e3 \u00b6 \u4e32\u53e3\u914d\u7f6e \u00b6 \u60f3\u8981\u770b\u5230\u6b63\u786e\u7684\u4e32\u53e3\u8f93\u51fa, \u9700\u8981: bootcode.bin \u4e2d\u8bbe\u7f6e BOOT_UART=1 sed -i -e \"s/BOOT_UART=0/BOOT_UART=1/\" bootcode.bin config.txt \u4e2d\u8bbe\u7f6e enable_uart=1 \u4ee5\u4e0a\u5728\u63d0\u4f9b\u7684 boot_utils \u4e2d\u5df2\u7ecf\u914d\u7f6e\u597d. \u4e32\u53e3\u8fde\u7ebf \u00b6 \u4e32\u53e3\u5ba2\u6237\u7aef \u00b6 \u4ee5 Putty \u4e3a\u4f8b: Speed \u8bbe\u4e3a 115200, Serial line \u8bbe\u4e3a /dev/ttyUSB0 , Connection type \u4e3a Serial, \u7136\u540e\u70b9\u51fb open. \u53c2\u8003\u8d44\u6599 \u00b6 bootmodes uart config.txt-boot","title":"\u5728\u6811\u8393\u6d3e\u4e0a\u8fd0\u884c Linux \u5185\u6838\u548c init (\u9009\u505a)"},{"location":"lab-1/raspi/#linux-init","text":"","title":"\u5728\u6811\u8393\u6d3e\u4e0a\u8fd0\u884c Linux \u5185\u6838\u548c init (\u9009\u505a)"},{"location":"lab-1/raspi/#_1","text":"\u4e00\u53f0\u8ba1\u7b97\u673a\uff1b \u4e00\u4e2a Raspberry Pi 3 Model B+ \uff08\u542b\u7535\u6e90\uff09\uff1b \u4e00\u5f20 2G \u4ee5\u4e0a\u7684 microSD \u5361\uff1b \u4e00\u4e2a microSD \u8bfb\u5361\u5668\uff1b HDMI \u7ebf\u548c\u5c4f\u5e55 CP2102 USB \u8f6c\u4e32\u53e3\u6a21\u5757 \u7531\u4e8e\u9700\u6c42\u989d\u5916\u786c\u4ef6\uff0c\u5728\u6811\u8393\u6d3e\u5b9e\u4f53\u673a\u4e0a\u8fd0\u884c\u4e3a\u9009\u505a\uff0c\u6b22\u8fce\u611f\u5174\u8da3\u7684\u540c\u5b66\u79ef\u6781\u5c1d\u8bd5\u3002\u5982\u679c\u9009\u505a\u6b64\u9879\u8bf7\u5728\u5b9e\u9a8c\u62a5\u544a\u4e2d\u8bf4\u660e\uff0c\u6279\u6539\u65f6\u8bc4\u6d4b\u73af\u5883\u5c06\u53d8\u4e3a\u6811\u8393\u6d3e\u5b9e\u4f53\u673a (\u5982\u679c\u5728\u5b9e\u4f53\u673a\u4e0a\u548c\u9884\u671f\u8868\u73b0\u4e0d\u7b26\u4f1a\u518d\u7528 QEMU \u8bc4\u6d4b). \u867d\u7136\u76f8\u6bd4 QEMU \u6ca1\u6709\u989d\u5916\u52a0\u5206, \u4f46\u662f\u52a9\u6559\u4eec\u4f1a\u7ed9\u4f60\u9f13\u638c\u638c.","title":"\u786c\u4ef6\u8bbe\u5907\u8981\u6c42"},{"location":"lab-1/raspi/#_2","text":"\u7531\u4e8e\u6811\u8393\u6d3e\u8c03\u8bd5\u76f8\u5bf9 QEMU \u66f4\u4e3a\u70e6\u7410, \u63a8\u8350\u914d\u5408\u4f7f\u7528 QEMU \u548c\u6811\u8393\u6d3e. \u9700\u8981\u6ce8\u610f\u4e32\u53e3\u76f8\u5173\u7684\u533a\u522b, \u5efa\u8bae\u9605\u8bfb\u6811\u8393\u6d3e\u5b98\u65b9\u5bf9\u4e8e\u4e32\u53e3\u7684 \u8bf4\u660e . \u901a\u8fc7 GPIO \u8fde\u63a5\u7684\u662f mini UART, \u5bf9\u5e94\u8bbe\u5907 /dev/ttyS0 .","title":"\u6ce8\u610f\u4e8b\u9879"},{"location":"lab-1/raspi/#_3","text":"SD \u5361\u4e0a\u521b\u5efa\u4e00\u4e2a fat32 \u5206\u533a, \u5e76\u6302\u8f7d \u5c06 boot_utils \u91cc\u7684\u5185\u5bb9, \u590d\u5236\u5230\u6302\u8f7d\u7684\u5206\u533a\u5185 \u5c06\u81ea\u5df1\u7f16\u8bd1\u7684 kernel \u548c \u6253\u5305\u7684 initrd \u590d\u5236\u8fdb\u6302\u8f7d\u7684\u5206\u533a\u5185, \u5e76\u547d\u540d\u4e3a kernel8.img \u548c initrd.cpio.gz umount \u8be5\u5206\u533a, \u518d\u53d6\u51fa SD\u5361 SD \u5361\u653e\u5165\u6811\u8393\u6d3e, \u8fde\u63a5\u663e\u793a\u5668\u548c\u4e32\u53e3\u6a21\u5757, \u6253\u5f00\u4e32\u53e3\u7ec8\u7aef (\u5982 Putty), \u518d\u63a5\u901a\u7535\u6e90. \u89c2\u5bdf\u663e\u793a\u5668\u548c\u4e32\u53e3\u7ec8\u7aef\u4e0a\u7684\u8f93\u51fa.","title":"\u6d41\u7a0b"},{"location":"lab-1/raspi/#configtxt","text":"tools/boot_utils/config.txt \u5185\u5bb9: arm_64bit=1 #\u542f\u52a8 64-bit \u5185\u6838, \u9ed8\u8ba4 kernel=kernel8.img initramfs initrd.cpio.gz followkernel #\u8bbe\u7f6e initrd \u6587\u4ef6\u540d, \u8bbe\u7f6e\u52a0\u8f7d\u5730\u5740\u4e3a followkernel enable_uart=1 #\u5f00\u542f mini UART","title":"config.txt \u5185\u5bb9\u8bf4\u660e"},{"location":"lab-1/raspi/#_4","text":"","title":"\u4e32\u53e3"},{"location":"lab-1/raspi/#_5","text":"\u60f3\u8981\u770b\u5230\u6b63\u786e\u7684\u4e32\u53e3\u8f93\u51fa, \u9700\u8981: bootcode.bin \u4e2d\u8bbe\u7f6e BOOT_UART=1 sed -i -e \"s/BOOT_UART=0/BOOT_UART=1/\" bootcode.bin config.txt \u4e2d\u8bbe\u7f6e enable_uart=1 \u4ee5\u4e0a\u5728\u63d0\u4f9b\u7684 boot_utils \u4e2d\u5df2\u7ecf\u914d\u7f6e\u597d.","title":"\u4e32\u53e3\u914d\u7f6e"},{"location":"lab-1/raspi/#_6","text":"","title":"\u4e32\u53e3\u8fde\u7ebf"},{"location":"lab-1/raspi/#_7","text":"\u4ee5 Putty \u4e3a\u4f8b: Speed \u8bbe\u4e3a 115200, Serial line \u8bbe\u4e3a /dev/ttyUSB0 , Connection type \u4e3a Serial, \u7136\u540e\u70b9\u51fb open.","title":"\u4e32\u53e3\u5ba2\u6237\u7aef"},{"location":"lab-1/raspi/#_8","text":"bootmodes uart config.txt-boot","title":"\u53c2\u8003\u8d44\u6599"},{"location":"xlab/","text":"\u5927\u4f5c\u4e1a \u00b6 \u8bf7\u5404\u4f4d\u540c\u5b66\u521b\u5efa Team \u5e76\u521b\u5efa\u5c5e\u4e8e\u961f\u4f0d\u7684\u4ed3\u5e93\uff08\u547d\u540d x-\u961f\u4f0d\u540d \uff09\u3001\u6216\u8005\u52a0\u5165\u961f\u53cb\u521b\u5efa\u597d\u7684 Team\uff0c\u5c06\u5927\u4f5c\u4e1a\u76f8\u5173\u8d44\u6599\u5b58\u653e\u5728\u4ed3\u5e93\u4e2d \u6bcf\u4e2a\u7ec4\u7684\u4ed3\u5e93\u9700\u5305\u542b README.md \u6587\u4ef6\uff0c\u5305\u542b\u7ec4\u5458\u540d\u5355\uff0c\u5177\u4f53\u683c\u5f0f\u53ca\u5176\u4f59\u5185\u5bb9\u81ea\u5b9a \u8c03\u7814\u62a5\u544a \u00b6 \u8c03\u7814\u62a5\u544a \u4e00\u822c \u5305\u542b\u4ee5\u4e0b\u65b9\u9762\u7684\u5185\u5bb9 \u5c0f\u7ec4\u6210\u5458 \u9879\u76ee\u7b80\u4ecb \u7acb\u9879\u4f9d\u636e \u9879\u76ee\u91cd\u8981\u6027 \u5c0f\u7ec4\u76f8\u5173\u5de5\u4f5c \u53c2\u8003\u6587\u732e \u8bf7\u5404\u7ec4\u5c06\u8c03\u7814\u62a5\u544a research.md \uff08\u6216\u8005 research.pdf \uff09\u63d0\u4ea4\u5230\u5927\u4f5c\u4e1a\u4ed3\u5e93\u4e2d\uff0c\u6240\u6709\u9700\u8981\u63d0\u4ea4\u7684\u6587\u6863\u8bf7\u6309\u7167\u4ee5\u4e0b\u76ee\u5f55\u63d0\u4ea4\u5230 docs \u4e0b (Git) # \u5927\u4f5c\u4e1a\u4ed3\u5e93\u6839\u76ee\u5f55 \u251c\u2500\u2500 docs # \u6587\u6863\u76ee\u5f55 \u2502 \u251c\u2500\u2500 research.md # \u8c03\u7814\u62a5\u544a\uff08\u6216 research.pdf \u7b49\uff09 \u2502 \u2514\u2500\u2500 files # \u5b58\u653e\u8d44\u6e90\u6587\u4ef6\uff08\u5982\uff1a\u62a5\u544a\u4e2d\u7684\u56fe\u7247\uff09 \u251c\u2500\u2500 README.md # \u4e0a\u9762\u8981\u6c42\u7684 README \u6587\u4ef6 \u2514\u2500\u2500 ... # \u5176\u4ed6\u6587\u4ef6","title":"\u5927\u4f5c\u4e1a"},{"location":"xlab/#_1","text":"\u8bf7\u5404\u4f4d\u540c\u5b66\u521b\u5efa Team \u5e76\u521b\u5efa\u5c5e\u4e8e\u961f\u4f0d\u7684\u4ed3\u5e93\uff08\u547d\u540d x-\u961f\u4f0d\u540d \uff09\u3001\u6216\u8005\u52a0\u5165\u961f\u53cb\u521b\u5efa\u597d\u7684 Team\uff0c\u5c06\u5927\u4f5c\u4e1a\u76f8\u5173\u8d44\u6599\u5b58\u653e\u5728\u4ed3\u5e93\u4e2d \u6bcf\u4e2a\u7ec4\u7684\u4ed3\u5e93\u9700\u5305\u542b README.md \u6587\u4ef6\uff0c\u5305\u542b\u7ec4\u5458\u540d\u5355\uff0c\u5177\u4f53\u683c\u5f0f\u53ca\u5176\u4f59\u5185\u5bb9\u81ea\u5b9a","title":"\u5927\u4f5c\u4e1a"},{"location":"xlab/#_2","text":"\u8c03\u7814\u62a5\u544a \u4e00\u822c \u5305\u542b\u4ee5\u4e0b\u65b9\u9762\u7684\u5185\u5bb9 \u5c0f\u7ec4\u6210\u5458 \u9879\u76ee\u7b80\u4ecb \u7acb\u9879\u4f9d\u636e \u9879\u76ee\u91cd\u8981\u6027 \u5c0f\u7ec4\u76f8\u5173\u5de5\u4f5c \u53c2\u8003\u6587\u732e \u8bf7\u5404\u7ec4\u5c06\u8c03\u7814\u62a5\u544a research.md \uff08\u6216\u8005 research.pdf \uff09\u63d0\u4ea4\u5230\u5927\u4f5c\u4e1a\u4ed3\u5e93\u4e2d\uff0c\u6240\u6709\u9700\u8981\u63d0\u4ea4\u7684\u6587\u6863\u8bf7\u6309\u7167\u4ee5\u4e0b\u76ee\u5f55\u63d0\u4ea4\u5230 docs \u4e0b (Git) # \u5927\u4f5c\u4e1a\u4ed3\u5e93\u6839\u76ee\u5f55 \u251c\u2500\u2500 docs # \u6587\u6863\u76ee\u5f55 \u2502 \u251c\u2500\u2500 research.md # \u8c03\u7814\u62a5\u544a\uff08\u6216 research.pdf \u7b49\uff09 \u2502 \u2514\u2500\u2500 files # \u5b58\u653e\u8d44\u6e90\u6587\u4ef6\uff08\u5982\uff1a\u62a5\u544a\u4e2d\u7684\u56fe\u7247\uff09 \u251c\u2500\u2500 README.md # \u4e0a\u9762\u8981\u6c42\u7684 README \u6587\u4ef6 \u2514\u2500\u2500 ... # \u5176\u4ed6\u6587\u4ef6","title":"\u8c03\u7814\u62a5\u544a"}]}